{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/lib/storage-adapter.ts"],"sourcesContent":["/*\r\n  Storage adapter\r\n\r\n  Exposes the same synchronous helper functions the app currently uses\r\n  (getStoredChats, saveChatsToStorage, getStoredMessages, saveMessagesToStorage, getAllUsers)\r\n  but also persists changes to a `json-server` backend (http://localhost:4000) in the\r\n  background. This preserves existing function signatures so components/contexts\r\n  don't need to change while moving persisted data to the server.\r\n\r\n  Behavior:\r\n  - Read functions return data from localStorage synchronously.\r\n  - Write functions update localStorage synchronously, then send the data to the\r\n    json-server via fetch calls (POST/PUT). Errors are logged but do not block.\r\n\r\n  Note: json-server uses numeric `id` by default. This adapter will store items\r\n  with app-generated string ids in localStorage and try to upsert server-side\r\n  records by matching on `id` when possible.\r\n*/\r\n\r\nimport type { Chat, Message } from \"@/utils/dummy-chats\"\r\nimport type { User } from \"@/utils/dummy-users\"\r\n\r\nconst API_BASE = \"http://localhost:4000\"\r\n\r\nconst STORAGE_KEYS = {\r\n  CHATS: \"quickchat_chats\",\r\n  MESSAGES: \"quickchat_messages\",\r\n  USERS: \"quickchat_registered_users\",\r\n  REQUESTS: \"quickchat_all_requests_db\",\r\n  FRIENDSHIPS: \"quickchat_all_friendships_db\",\r\n  STORIES: \"quickchat_stories\",\r\n}\r\n\r\nfunction safeParse<T>(str: string | null): T | null {\r\n  if (!str) return null\r\n  try {\r\n    return JSON.parse(str) as T\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] parse error\", e)\r\n    return null\r\n  }\r\n}\r\n\r\nexport function getStoredChats(): Chat[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<Chat[]>(localStorage.getItem(STORAGE_KEYS.CHATS))\r\n  if (stored) return stored.map((c) => ({ ...c, createdAt: new Date(c.createdAt) }))\r\n  return []\r\n}\r\n\r\nexport function saveChatsToStorage(chats: Chat[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.CHATS, JSON.stringify(chats))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving chats to localStorage:\", e)\r\n  }\r\n\r\n  // Background sync to backend - POST each chat\r\n  ;(async () => {\r\n    try {\r\n      for (const chat of chats) {\r\n        await fetch(`${API_BASE}/chats`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(chat),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced chats to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync chats to backend (is json-server running?):\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport function getStoredMessages(): Message[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<Message[]>(localStorage.getItem(STORAGE_KEYS.MESSAGES))\r\n  if (stored) return stored.map((m) => ({ ...m, timestamp: new Date(m.timestamp) }))\r\n  return []\r\n}\r\n\r\nexport function saveMessagesToStorage(messages: Message[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.MESSAGES, JSON.stringify(messages))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving messages to localStorage:\", e)\r\n  }\r\n\r\n  ;(async () => {\r\n    try {\r\n      for (const msg of messages) {\r\n        await fetch(`${API_BASE}/messages`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(msg),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced messages to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync messages to backend (is json-server running?):\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport function getAllUsers(): User[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<User[]>(localStorage.getItem(STORAGE_KEYS.USERS))\r\n  if (stored) return stored\r\n  return []\r\n}\r\n\r\nexport function saveAllUsers(users: User[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving users to localStorage:\", e)\r\n  }\r\n\r\n  ;(async () => {\r\n    try {\r\n      for (const user of users) {\r\n        await fetch(`${API_BASE}/users`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(user),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced users to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync users to backend (is json-server running?):\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport function getAllRequests(): any[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<any[]>(localStorage.getItem(STORAGE_KEYS.REQUESTS))\r\n  return stored || []\r\n}\r\n\r\nexport function saveAllRequests(requests: any[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.REQUESTS, JSON.stringify(requests))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving requests to localStorage:\", e)\r\n  }\r\n\r\n  ;(async () => {\r\n    try {\r\n      for (const req of requests) {\r\n        await fetch(`${API_BASE}/friendRequests`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(req),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced friend requests to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync friendRequests to backend:\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport function getAllFriendships(): any[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<any[]>(localStorage.getItem(STORAGE_KEYS.FRIENDSHIPS))\r\n  return stored || []\r\n}\r\n\r\nexport function saveAllFriendships(friendships: any[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.FRIENDSHIPS, JSON.stringify(friendships))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving friendships to localStorage:\", e)\r\n  }\r\n\r\n  ;(async () => {\r\n    try {\r\n      for (const friendship of friendships) {\r\n        await fetch(`${API_BASE}/friendships`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(friendship),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced friendships to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync friendships to backend:\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport function getStories(): any[] {\r\n  if (typeof window === \"undefined\") return []\r\n  const stored = safeParse<any[]>(localStorage.getItem(STORAGE_KEYS.STORIES))\r\n  return stored || []\r\n}\r\n\r\nexport function saveStories(stories: any[]) {\r\n  if (typeof window === \"undefined\") return\r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.STORIES, JSON.stringify(stories))\r\n  } catch (e) {\r\n    console.error(\"[Storage Adapter] Error saving stories to localStorage:\", e)\r\n  }\r\n\r\n  ;(async () => {\r\n    try {\r\n      for (const story of stories) {\r\n        await fetch(`${API_BASE}/stories`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(story),\r\n        }).catch(() => {}) // Silently ignore errors\r\n      }\r\n      console.log(\"[Storage Adapter] Synced stories to backend\")\r\n    } catch (e) {\r\n      console.warn(\"[Storage Adapter] Could not sync stories to backend:\", e)\r\n    }\r\n  })()\r\n}\r\n\r\nexport default {\r\n  getStoredChats,\r\n  saveChatsToStorage,\r\n  getStoredMessages,\r\n  saveMessagesToStorage,\r\n  getAllUsers,\r\n  saveAllUsers,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/context/auth-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Authentication Context\r\n *\r\n * Manages user authentication state throughout the application.\r\n * Uses dummy authentication for development - easily replaceable with real auth.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useCallback, useEffect } from \"react\"\r\nimport type { User } from \"@/utils/dummy-users\"\r\nimport { getAllUsers, saveAllUsers } from \"@/lib/storage-adapter\"\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  isAuthenticated: boolean\r\n  isLoading: boolean\r\n  login: (email: string, password: string) => Promise<boolean>\r\n  register: (name: string, email: string, password: string) => Promise<boolean>\r\n  logout: () => void\r\n  error: string | null\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Skip auto-login - user must explicitly login\r\n  useEffect(() => {\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  /**\r\n   * Login function - authenticates user with email/password\r\n   * In production, this would call a real authentication API\r\n   */\r\n  const login = useCallback(async (email: string, password: string): Promise<boolean> => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    // Simulate API delay\r\n    await new Promise((resolve) => setTimeout(resolve, 800))\r\n\r\n    const allUsers = getAllUsers()\r\n    const foundUser = allUsers.find((u) => u.email.toLowerCase() === email.toLowerCase())\r\n\r\n    if (foundUser && password.length >= 6) {\r\n      const loggedInUser = { ...foundUser, status: \"online\" as const }\r\n      setUser(loggedInUser)\r\n      localStorage.setItem(\"quickchat_user\", JSON.stringify(loggedInUser))\r\n      setIsLoading(false)\r\n      return true\r\n    }\r\n\r\n    setError(\"Invalid email or password\")\r\n    setIsLoading(false)\r\n    return false\r\n  }, [])\r\n\r\n  /**\r\n   * Register function - creates new user account\r\n   * In production, this would call a real registration API\r\n   */\r\n  const register = useCallback(async (name: string, email: string, password: string): Promise<boolean> => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    // Simulate API delay\r\n    await new Promise((resolve) => setTimeout(resolve, 800))\r\n\r\n    const allUsers = getAllUsers()\r\n    const existingUser = allUsers.find((u) => u.email.toLowerCase() === email.toLowerCase())\r\n\r\n    if (existingUser) {\r\n      setError(\"Email already registered\")\r\n      setIsLoading(false)\r\n      return false\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      setError(\"Password must be at least 6 characters\")\r\n      setIsLoading(false)\r\n      return false\r\n    }\r\n\r\n    // Create new user\r\n    const newUser: User = {\r\n      id: `user-${Date.now()}`,\r\n      name,\r\n      email,\r\n      avatar: `/placeholder.svg?height=40&width=40&query=${encodeURIComponent(name)} avatar`,\r\n      status: \"online\",\r\n    }\r\n\r\n    // persist via storage adapter\r\n    const updated = [...allUsers, newUser]\r\n    saveAllUsers(updated)\r\n\r\n    setUser(newUser)\r\n    localStorage.setItem(\"quickchat_user\", JSON.stringify(newUser))\r\n    setIsLoading(false)\r\n    return true\r\n  }, [])\r\n\r\n  /**\r\n   * Logout function - clears user session\r\n   */\r\n  const logout = useCallback(() => {\r\n    setUser(null)\r\n    localStorage.removeItem(\"quickchat_user\")\r\n  }, [])\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    isAuthenticated: !!user,\r\n    isLoading,\r\n    login,\r\n    register,\r\n    logout,\r\n    error,\r\n  }\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\r\n}\r\n\r\n/**\r\n * Custom hook to access auth context\r\n */\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAUA;AAEA;;;AAZA;;;AAwBA,MAAM,4BAAc,IAAA,2OAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,sOAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sOAAQ,EAAgB;IAElD,+CAA+C;IAC/C,IAAA,uOAAS;kCAAC;YACR,aAAa;QACf;iCAAG,EAAE;IAEL;;;GAGC,GACD,MAAM,QAAQ,IAAA,yOAAW;2CAAC,OAAO,OAAe;YAC9C,aAAa;YACb,SAAS;YAET,qBAAqB;YACrB,MAAM,IAAI;mDAAQ,CAAC,UAAY,WAAW,SAAS;;YAEnD,MAAM,WAAW,IAAA,wMAAW;YAC5B,MAAM,YAAY,SAAS,IAAI;6DAAC,CAAC,IAAM,EAAE,KAAK,CAAC,WAAW,OAAO,MAAM,WAAW;;YAElF,IAAI,aAAa,SAAS,MAAM,IAAI,GAAG;gBACrC,MAAM,eAAe;oBAAE,GAAG,SAAS;oBAAE,QAAQ;gBAAkB;gBAC/D,QAAQ;gBACR,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;gBACtD,aAAa;gBACb,OAAO;YACT;YAEA,SAAS;YACT,aAAa;YACb,OAAO;QACT;0CAAG,EAAE;IAEL;;;GAGC,GACD,MAAM,WAAW,IAAA,yOAAW;8CAAC,OAAO,MAAc,OAAe;YAC/D,aAAa;YACb,SAAS;YAET,qBAAqB;YACrB,MAAM,IAAI;sDAAQ,CAAC,UAAY,WAAW,SAAS;;YAEnD,MAAM,WAAW,IAAA,wMAAW;YAC5B,MAAM,eAAe,SAAS,IAAI;mEAAC,CAAC,IAAM,EAAE,KAAK,CAAC,WAAW,OAAO,MAAM,WAAW;;YAErF,IAAI,cAAc;gBAChB,SAAS;gBACT,aAAa;gBACb,OAAO;YACT;YAEA,IAAI,SAAS,MAAM,GAAG,GAAG;gBACvB,SAAS;gBACT,aAAa;gBACb,OAAO;YACT;YAEA,kBAAkB;YAClB,MAAM,UAAgB;gBACpB,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;gBACxB;gBACA;gBACA,QAAQ,CAAC,0CAA0C,EAAE,mBAAmB,MAAM,OAAO,CAAC;gBACtF,QAAQ;YACV;YAEA,8BAA8B;YAC9B,MAAM,UAAU;mBAAI;gBAAU;aAAQ;YACtC,IAAA,yMAAY,EAAC;YAEb,QAAQ;YACR,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;YACtD,aAAa;YACb,OAAO;QACT;6CAAG,EAAE;IAEL;;GAEC,GACD,MAAM,SAAS,IAAA,yOAAW;4CAAC;YACzB,QAAQ;YACR,aAAa,UAAU,CAAC;QAC1B;2CAAG,EAAE;IAEL,MAAM,QAAyB;QAC7B;QACA,iBAAiB,CAAC,CAAC;QACnB;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,0PAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;GArGgB;KAAA;AA0GT,SAAS;;IACd,MAAM,UAAU,IAAA,wOAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/context/chat-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Chat Context\r\n *\r\n * Manages all chat-related state including messages, active chats,\r\n * and chat operations. Structured for easy backend integration.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useCallback, useMemo, useEffect } from \"react\"\r\nimport type { Chat, Message } from \"@/utils/dummy-chats\"\r\nimport type { User } from \"@/utils/dummy-users\"\r\nimport {\r\n  getStoredChats,\r\n  getStoredMessages,\r\n  saveChatsToStorage,\r\n  saveMessagesToStorage,\r\n  getAllUsers,\r\n} from \"@/lib/storage-adapter\"\r\nimport { useAuth } from \"./auth-context\"\r\n\r\nconst STORAGE_KEYS = {\r\n  CHATS: \"quickchat_chats\",\r\n  MESSAGES: \"quickchat_messages\",\r\n  MIGRATION_V2: \"quickchat_migrated_v2\", // Flag to track migration\r\n}\r\n\r\n\r\n\r\n/**\r\n * Remove duplicate chats. For group chats, dedupe by group name so\r\n * there is only one group with the same name. For other chats, keep\r\n * the first occurrence.\r\n */\r\nfunction dedupeChats(chats: Chat[]): Chat[] {\r\n  const seen = new Set<string>()\r\n  const out: Chat[] = []\r\n\r\n  for (const c of chats) {\r\n    const key = c.type === \"group\" && c.name ? `group:${c.name}` : `chat:${c.id}`\r\n    if (!seen.has(key)) {\r\n      seen.add(key)\r\n      out.push(c)\r\n    }\r\n  }\r\n\r\n  return out\r\n}\r\n\r\ninterface ChatContextType {\r\n  // State\r\n  chats: Chat[]\r\n  messages: Message[]\r\n  selectedChat: Chat | null\r\n  typingUsers: { [chatId: string]: string[] }\r\n\r\n  // Actions\r\n  selectChat: (chatId: string) => void\r\n  sendMessage: (content: string) => void\r\n  createGroupChat: (name: string, participantIds: string[]) => void\r\n  createDirectChat: (userId: string) => void\r\n  removeUserFromChat: (chatId: string, userId: string) => void\r\n  deleteChat: (chatId: string) => void\r\n  editChat: (chatId: string, updates: Partial<Pick<Chat, \"name\" | \"avatar\" | \"participants\">>) => void\r\n  markAsRead: (chatId: string) => void\r\n  setTyping: (chatId: string, isTyping: boolean) => void\r\n\r\n  // Helpers\r\n  getChatName: (chat: Chat) => string\r\n  getChatAvatar: (chat: Chat) => string\r\n  getOtherParticipant: (chat: Chat) => User | undefined\r\n  availableUsers: User[]\r\n}\r\n\r\nconst ChatContext = createContext<ChatContextType | undefined>(undefined)\r\n\r\nexport function ChatProvider({ children }: { children: React.ReactNode }) {\r\n  const { user } = useAuth()\r\n\r\n  const [chats, setChats] = useState<Chat[]>([])\r\n  const [messages, setMessages] = useState<Message[]>([])\r\n  const [selectedChat, setSelectedChat] = useState<Chat | null>(null)\r\n  const [typingUsers, setTypingUsers] = useState<{ [chatId: string]: string[] }>({})\r\n  const [allUsers, setAllUsers] = useState<User[]>([])\r\n  const [isInitialized, setIsInitialized] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Migration: Clear old persisted chats on first load (v2)\r\n    if (typeof window !== \"undefined\" && !localStorage.getItem(STORAGE_KEYS.MIGRATION_V2)) {\r\n      localStorage.removeItem(STORAGE_KEYS.CHATS)\r\n      localStorage.removeItem(STORAGE_KEYS.MESSAGES)\r\n      localStorage.setItem(STORAGE_KEYS.MIGRATION_V2, \"true\")\r\n      console.log(\"[Chat Context] Cleared old persisted chats (migration v2)\")\r\n    }\r\n\r\n    const storedChats = getStoredChats()\r\n    const storedMessages = getStoredMessages()\r\n\r\n    // Start with only user-created chats (no seed data)\r\n    const cleaned = dedupeChats(storedChats)\r\n    setChats(cleaned)\r\n    if (cleaned.length !== storedChats.length) saveChatsToStorage(cleaned)\r\n\r\n    setMessages(storedMessages)\r\n\r\n    setIsInitialized(true)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!user || !isInitialized) return\r\n\r\n    const refreshData = () => {\r\n      const storedChats = getStoredChats()\r\n      const storedMessages = getStoredMessages()\r\n\r\n      if (storedChats.length > 0) {\r\n        const cleaned = dedupeChats(storedChats)\r\n        setChats(cleaned)\r\n        if (cleaned.length !== storedChats.length) saveChatsToStorage(cleaned)\r\n      }\r\n      if (storedMessages.length > 0) {\r\n        setMessages(storedMessages)\r\n      }\r\n    }\r\n\r\n    // Refresh immediately\r\n    refreshData()\r\n\r\n    const interval = setInterval(refreshData, 2000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [user, isInitialized])\r\n\r\n  useEffect(() => {\r\n    // Initial load\r\n    setAllUsers(getAllUsers())\r\n\r\n    // Poll for new users every 2 seconds\r\n    const interval = setInterval(() => {\r\n      setAllUsers(getAllUsers())\r\n    }, 2000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    setAllUsers(getAllUsers())\r\n  }, [user])\r\n\r\n  /**\r\n   * Select a chat and load its messages\r\n   */\r\n  const selectChat = useCallback(\r\n    (chatId: string) => {\r\n      const chat = chats.find((c) => c.id === chatId)\r\n      if (chat) {\r\n        setSelectedChat(chat)\r\n        // Mark messages as read\r\n        setChats((prev) => {\r\n          const updated = prev.map((c) => (c.id === chatId ? { ...c, unreadCount: 0 } : c))\r\n          saveChatsToStorage(updated)\r\n          return updated\r\n        })\r\n      }\r\n    },\r\n    [chats],\r\n  )\r\n\r\n  /**\r\n   * Send a new message in the selected chat\r\n   */\r\n  const sendMessage = useCallback(\r\n    (content: string) => {\r\n      if (!selectedChat || !user || !content.trim()) return\r\n\r\n      const newMessage: Message = {\r\n        id: `msg-${Date.now()}-${user.id}`,\r\n        chatId: selectedChat.id,\r\n        senderId: user.id,\r\n        content: content.trim(),\r\n        timestamp: new Date(),\r\n        status: \"sent\",\r\n      }\r\n\r\n      setMessages((prev) => {\r\n        const updated = [...prev, newMessage]\r\n        saveMessagesToStorage(updated)\r\n        return updated\r\n      })\r\n\r\n      setChats((prev) => {\r\n        const updated = prev.map((chat) => {\r\n          if (chat.id === selectedChat.id) {\r\n            return {\r\n              ...chat,\r\n              lastMessage: newMessage,\r\n              // Increment unread count for the recipient\r\n              unreadCount: 0,\r\n            }\r\n          }\r\n          return chat\r\n        })\r\n        saveChatsToStorage(updated)\r\n        return updated\r\n      })\r\n\r\n      // Simulate message delivery status update\r\n      setTimeout(() => {\r\n        setMessages((prev) => {\r\n          const updated = prev.map((msg) => (msg.id === newMessage.id ? { ...msg, status: \"delivered\" } : msg))\r\n          saveMessagesToStorage(updated)\r\n          return updated\r\n        })\r\n      }, 1000)\r\n\r\n      // Simulate read status\r\n      setTimeout(() => {\r\n        setMessages((prev) => {\r\n          const updated = prev.map((msg) => (msg.id === newMessage.id ? { ...msg, status: \"read\" } : msg))\r\n          saveMessagesToStorage(updated)\r\n          return updated\r\n        })\r\n      }, 2000)\r\n    },\r\n    [selectedChat, user],\r\n  )\r\n\r\n  /**\r\n   * Create a new group chat\r\n   */\r\n  const createGroupChat = useCallback(\r\n    (name: string, participantIds: string[]) => {\r\n      if (!user) return\r\n\r\n      const newChat: Chat = {\r\n        id: `chat-${Date.now()}`,\r\n        type: \"group\",\r\n        name,\r\n        avatar: `/placeholder.svg?height=40&width=40&query=${encodeURIComponent(name)} group`,\r\n        participants: [user.id, ...participantIds],\r\n        unreadCount: 0,\r\n        createdAt: new Date(),\r\n      }\r\n\r\n      setChats((prev) => {\r\n        const updated = [newChat, ...prev]\r\n        saveChatsToStorage(updated)\r\n        return updated\r\n      })\r\n      setSelectedChat(newChat)\r\n    },\r\n    [user],\r\n  )\r\n\r\n  /**\r\n   * Create or open a direct chat with a user\r\n   */\r\n  const createDirectChat = useCallback(\r\n    (userId: string) => {\r\n      if (!user) return\r\n\r\n      const latestChats = getStoredChats()\r\n      const existingChat = latestChats.find(\r\n        (chat) => chat.type === \"direct\" && chat.participants.includes(user.id) && chat.participants.includes(userId),\r\n      )\r\n\r\n      if (existingChat) {\r\n        setChats(latestChats)\r\n        setSelectedChat(existingChat)\r\n        return\r\n      }\r\n\r\n      const newChat: Chat = {\r\n        id: `chat-${Date.now()}-${user.id}-${userId}`,\r\n        type: \"direct\",\r\n        participants: [user.id, userId],\r\n        unreadCount: 0,\r\n        createdAt: new Date(),\r\n      }\r\n\r\n      const updatedChats = [newChat, ...latestChats]\r\n      saveChatsToStorage(updatedChats)\r\n      setChats(updatedChats)\r\n      setSelectedChat(newChat)\r\n    },\r\n    [user],\r\n  )\r\n\r\n  /**\r\n   * Mark all messages in a chat as read\r\n   */\r\n  const markAsRead = useCallback((chatId: string) => {\r\n    setChats((prev) => {\r\n      const updated = prev.map((chat) => (chat.id === chatId ? { ...chat, unreadCount: 0 } : chat))\r\n      saveChatsToStorage(updated)\r\n      return updated\r\n    })\r\n  }, [])\r\n\r\n  /**\r\n   * Remove a user from a chat. If after removal the chat has fewer than\r\n   * 2 participants, the chat will be deleted.\r\n   */\r\n  const removeUserFromChat = useCallback(\r\n    (chatId: string, userId: string) => {\r\n      setChats((prev) => {\r\n        const updated: Chat[] = []\r\n        for (const c of prev) {\r\n          if (c.id === chatId) {\r\n            const participants = c.participants.filter((p) => p !== userId)\r\n            if (participants.length < 2) {\r\n              // skip adding -> effectively delete the chat\r\n              continue\r\n            }\r\n            updated.push({ ...c, participants })\r\n          } else {\r\n            updated.push(c)\r\n          }\r\n        }\r\n        saveChatsToStorage(updated)\r\n\r\n        // If the selected chat was modified/removed, update selectedChat\r\n        if (selectedChat?.id === chatId) {\r\n          const found = updated.find((ch) => ch.id === chatId)\r\n          if (found) setSelectedChat(found)\r\n          else setSelectedChat(null)\r\n        }\r\n\r\n        return updated\r\n      })\r\n    },\r\n    [selectedChat],\r\n  )\r\n\r\n  /** Delete a chat and its messages */\r\n  const deleteChat = useCallback(\r\n    (chatId: string) => {\r\n      setChats((prev) => {\r\n        const updated = prev.filter((c) => c.id !== chatId)\r\n        saveChatsToStorage(updated)\r\n        return updated\r\n      })\r\n\r\n      setMessages((prev) => {\r\n        const updated = prev.filter((m) => m.chatId !== chatId)\r\n        saveMessagesToStorage(updated)\r\n        return updated\r\n      })\r\n\r\n      if (selectedChat?.id === chatId) {\r\n        setSelectedChat(null)\r\n      }\r\n    },\r\n    [selectedChat],\r\n  )\r\n\r\n  /** Edit chat metadata (name, avatar, participants) */\r\n  const editChat = useCallback(\r\n    (chatId: string, updates: Partial<Pick<Chat, \"name\" | \"avatar\" | \"participants\">>) => {\r\n      setChats((prev) => {\r\n        const updated = prev.map((c) => (c.id === chatId ? { ...c, ...updates } : c))\r\n        saveChatsToStorage(updated)\r\n        return updated\r\n      })\r\n\r\n      if (selectedChat?.id === chatId) {\r\n        const latest = getStoredChats().find((c) => c.id === chatId) || null\r\n        setSelectedChat(latest)\r\n      }\r\n    },\r\n    [selectedChat],\r\n  )\r\n\r\n  /**\r\n   * Set typing indicator for current user in a chat\r\n   */\r\n  const setTyping = useCallback(\r\n    (chatId: string, isTyping: boolean) => {\r\n      if (!user) return\r\n\r\n      setTypingUsers((prev) => {\r\n        const currentTyping = prev[chatId] || []\r\n        if (isTyping && !currentTyping.includes(user.id)) {\r\n          return { ...prev, [chatId]: [...currentTyping, user.id] }\r\n        } else if (!isTyping) {\r\n          return { ...prev, [chatId]: currentTyping.filter((id) => id !== user.id) }\r\n        }\r\n        return prev\r\n      })\r\n    },\r\n    [user],\r\n  )\r\n\r\n  /**\r\n   * Get display name for a chat\r\n   */\r\n  const getChatName = useCallback(\r\n    (chat: Chat): string => {\r\n      if (chat.type === \"group\") {\r\n        return chat.name || \"Group Chat\"\r\n      }\r\n\r\n      const otherUserId = chat.participants.find((id) => id !== user?.id)\r\n      const otherUser = allUsers.find((u) => u.id === otherUserId)\r\n      return otherUser?.name || \"Unknown User\"\r\n    },\r\n    [user, allUsers],\r\n  )\r\n\r\n  /**\r\n   * Get avatar for a chat\r\n   */\r\n  const getChatAvatar = useCallback(\r\n    (chat: Chat): string => {\r\n      if (chat.type === \"group\" && chat.avatar) {\r\n        return chat.avatar\r\n      }\r\n\r\n      const otherUserId = chat.participants.find((id) => id !== user?.id)\r\n      const otherUser = allUsers.find((u) => u.id === otherUserId)\r\n      return otherUser?.avatar || \"/default-avatar.png\"\r\n    },\r\n    [user, allUsers],\r\n  )\r\n\r\n  /**\r\n   * Get the other participant in a direct chat\r\n   */\r\n  const getOtherParticipant = useCallback(\r\n    (chat: Chat): User | undefined => {\r\n      if (chat.type !== \"direct\") return undefined\r\n      const otherUserId = chat.participants.find((id) => id !== user?.id)\r\n      return allUsers.find((u) => u.id === otherUserId)\r\n    },\r\n    [user, allUsers],\r\n  )\r\n\r\n  /**\r\n   * Get users available for new chats (excludes current user)\r\n   * Now includes registered users from localStorage\r\n   */\r\n  const availableUsers = useMemo(() => {\r\n    if (!user) return []\r\n    return allUsers.filter((u) => u.id !== user.id)\r\n  }, [user, allUsers])\r\n\r\n  const value: ChatContextType = {\r\n    chats,\r\n    messages,\r\n    selectedChat,\r\n    typingUsers,\r\n    selectChat,\r\n    sendMessage,\r\n    createGroupChat,\r\n    createDirectChat,\r\n    markAsRead,\r\n    setTyping,\r\n    getChatName,\r\n    getChatAvatar,\r\n    getOtherParticipant,\r\n    availableUsers,\r\n  }\r\n\r\n  return <ChatContext.Provider value={value}>{children}</ChatContext.Provider>\r\n}\r\n\r\n/**\r\n * Custom hook to access chat context\r\n */\r\nexport function useChat() {\r\n  const context = useContext(ChatContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useChat must be used within a ChatProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 981, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/context/socket-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Socket Context (Mock Implementation)\r\n *\r\n * Provides WebSocket-like functionality for real-time features.\r\n * This is a placeholder implementation that simulates socket behavior.\r\n *\r\n * In production, replace with actual Socket.io or WebSocket connection:\r\n * - import { io } from \"socket.io-client\";\r\n * - const socket = io(\"YOUR_SOCKET_SERVER_URL\");\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useCallback, useEffect, useState } from \"react\"\r\nimport { useAuth } from \"./auth-context\"\r\n\r\ntype SocketEventHandler = (data: unknown) => void\r\n\r\ninterface SocketContextType {\r\n  isConnected: boolean\r\n  emit: (event: string, data: unknown) => void\r\n  on: (event: string, handler: SocketEventHandler) => void\r\n  off: (event: string, handler: SocketEventHandler) => void\r\n}\r\n\r\nconst SocketContext = createContext<SocketContextType | undefined>(undefined)\r\n\r\nexport function SocketProvider({ children }: { children: React.ReactNode }) {\r\n  const { user, isAuthenticated } = useAuth()\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const [eventHandlers, setEventHandlers] = useState<{\r\n    [event: string]: SocketEventHandler[]\r\n  }>({})\r\n\r\n  /**\r\n   * Simulate socket connection when user authenticates\r\n   */\r\n  useEffect(() => {\r\n    if (isAuthenticated && user) {\r\n      // Simulate connection delay\r\n      const timer = setTimeout(() => {\r\n        setIsConnected(true)\r\n        console.log(\"[QuickChat Socket] Connected as:\", user.name)\r\n\r\n        // Emit connected event\r\n        triggerEvent(\"user:connected\", { userId: user.id })\r\n      }, 500)\r\n\r\n      return () => {\r\n        clearTimeout(timer)\r\n        setIsConnected(false)\r\n        console.log(\"[QuickChat Socket] Disconnected\")\r\n      }\r\n    } else {\r\n      setIsConnected(false)\r\n    }\r\n  }, [isAuthenticated, user])\r\n\r\n  /**\r\n   * Trigger all handlers for an event\r\n   */\r\n  const triggerEvent = useCallback(\r\n    (event: string, data: unknown) => {\r\n      const handlers = eventHandlers[event] || []\r\n      handlers.forEach((handler) => handler(data))\r\n    },\r\n    [eventHandlers],\r\n  )\r\n\r\n  /**\r\n   * Emit an event (simulates sending to server)\r\n   * In production, this would use socket.emit()\r\n   */\r\n  const emit = useCallback(\r\n    (event: string, data: unknown) => {\r\n      if (!isConnected) {\r\n        console.warn(\"[QuickChat Socket] Not connected, cannot emit:\", event)\r\n        return\r\n      }\r\n\r\n      console.log(\"[QuickChat Socket] Emit:\", event, data)\r\n\r\n      // Simulate server response for certain events\r\n      switch (event) {\r\n        case \"message:send\":\r\n          // Simulate message delivery confirmation\r\n          setTimeout(() => {\r\n            triggerEvent(\"message:delivered\", data)\r\n          }, 500)\r\n          break\r\n\r\n        case \"typing:start\":\r\n          // Simulate typing indicator broadcast\r\n          setTimeout(() => {\r\n            triggerEvent(\"user:typing\", data)\r\n          }, 100)\r\n          break\r\n\r\n        case \"typing:stop\":\r\n          setTimeout(() => {\r\n            triggerEvent(\"user:stopped-typing\", data)\r\n          }, 100)\r\n          break\r\n\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [isConnected, triggerEvent],\r\n  )\r\n\r\n  /**\r\n   * Subscribe to an event\r\n   */\r\n  const on = useCallback((event: string, handler: SocketEventHandler) => {\r\n    setEventHandlers((prev) => ({\r\n      ...prev,\r\n      [event]: [...(prev[event] || []), handler],\r\n    }))\r\n  }, [])\r\n\r\n  /**\r\n   * Unsubscribe from an event\r\n   */\r\n  const off = useCallback((event: string, handler: SocketEventHandler) => {\r\n    setEventHandlers((prev) => ({\r\n      ...prev,\r\n      [event]: (prev[event] || []).filter((h) => h !== handler),\r\n    }))\r\n  }, [])\r\n\r\n  /**\r\n   * Simulate random typing indicators from other users\r\n   */\r\n  useEffect(() => {\r\n    if (!isConnected) return\r\n\r\n    const interval = setInterval(() => {\r\n      // Randomly trigger typing indicator (10% chance)\r\n      if (Math.random() < 0.1) {\r\n        triggerEvent(\"user:typing\", {\r\n          userId: \"user-2\",\r\n          chatId: \"chat-1\",\r\n        })\r\n\r\n        // Stop typing after 2-4 seconds\r\n        setTimeout(\r\n          () => {\r\n            triggerEvent(\"user:stopped-typing\", {\r\n              userId: \"user-2\",\r\n              chatId: \"chat-1\",\r\n            })\r\n          },\r\n          2000 + Math.random() * 2000,\r\n        )\r\n      }\r\n    }, 5000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [isConnected, triggerEvent])\r\n\r\n  const value: SocketContextType = {\r\n    isConnected,\r\n    emit,\r\n    on,\r\n    off,\r\n  }\r\n\r\n  return <SocketContext.Provider value={value}>{children}</SocketContext.Provider>\r\n}\r\n\r\n/**\r\n * Custom hook to access socket context\r\n */\r\nexport function useSocket() {\r\n  const context = useContext(SocketContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useSocket must be used within a SocketProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1188, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/context/friend-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Friend Context\r\n *\r\n * Manages friend requests and friendships between users.\r\n * Uses a global shared database in localStorage so all users can access each other's data.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useCallback, useEffect, useRef } from \"react\"\r\nimport { useAuth } from \"./auth-context\"\r\nimport {\r\n  getAllRequests,\r\n  saveAllRequests,\r\n  getAllFriendships,\r\n  saveAllFriendships,\r\n} from \"@/lib/storage-adapter\"\r\n\r\n// Friend request status types\r\nexport type RequestStatus = \"pending\" | \"accepted\" | \"rejected\"\r\n\r\n// Friend request interface\r\nexport interface FriendRequest {\r\n  id: string\r\n  fromUserId: string\r\n  toUserId: string\r\n  status: RequestStatus\r\n  createdAt: Date\r\n}\r\n\r\n// Friendship interface (accepted requests)\r\nexport interface Friendship {\r\n  id: string\r\n  user1Id: string\r\n  user2Id: string\r\n  createdAt: Date\r\n}\r\n\r\ninterface FriendContextType {\r\n  // State\r\n  friendRequests: FriendRequest[]\r\n  friendships: Friendship[]\r\n\r\n  // Actions\r\n  sendFriendRequest: (toUserId: string) => void\r\n  acceptFriendRequest: (requestId: string) => void\r\n  rejectFriendRequest: (requestId: string) => void\r\n  cancelFriendRequest: (requestId: string) => void\r\n  removeFriend: (friendshipId: string) => void\r\n\r\n  // Helpers\r\n  isFriend: (userId: string) => boolean\r\n  hasPendingRequestTo: (userId: string) => boolean\r\n  hasPendingRequestFrom: (userId: string) => boolean\r\n  getRequestStatus: (userId: string) => \"none\" | \"sent\" | \"received\" | \"friends\"\r\n  getIncomingRequests: () => FriendRequest[]\r\n  getOutgoingRequests: () => FriendRequest[]\r\n  getFriendIds: () => string[]\r\n}\r\n\r\nconst FriendContext = createContext<FriendContextType | undefined>(undefined)\r\n\r\n// Global database keys - shared by all users\r\nconst GLOBAL_REQUESTS_DB = \"quickchat_all_requests_db\"\r\nconst GLOBAL_FRIENDSHIPS_DB = \"quickchat_all_friendships_db\"\r\nconst POLL_INTERVAL = 1000 // Check for updates every second\r\n\r\n// Helper functions to manage global database\r\nconst getAllRequestsFromDB = (): FriendRequest[] => {\r\n  return getAllRequests().map((r: any) => ({ ...r, createdAt: new Date(r.createdAt) }))\r\n}\r\n\r\nconst getAllFriendshipsFromDB = (): Friendship[] => {\r\n  return getAllFriendships().map((f: any) => ({ ...f, createdAt: new Date(f.createdAt) }))\r\n}\r\n\r\nconst saveRequestsToDB = (requests: FriendRequest[]) => {\r\n  saveAllRequests(requests)\r\n}\r\n\r\nconst saveFriendshipsToDB = (friendships: Friendship[]) => {\r\n  saveAllFriendships(friendships)\r\n}\r\n\r\nexport function FriendProvider({ children }: { children: React.ReactNode }) {\r\n  const { user } = useAuth()\r\n\r\n  const [friendRequests, setFriendRequests] = useState<FriendRequest[]>([])\r\n  const [friendships, setFriendships] = useState<Friendship[]>([])\r\n  const pollTimerRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Load relevant requests and friendships for current user from global DB\r\n  const loadUserData = useCallback(() => {\r\n    if (!user) return\r\n\r\n    const allRequests = getAllRequestsFromDB()\r\n    const allFriendships = getAllFriendshipsFromDB()\r\n\r\n    // Filter requests relevant to this user\r\n    const userRequests = allRequests.filter(\r\n      (r) => r.fromUserId === user.id || r.toUserId === user.id\r\n    )\r\n\r\n    // Filter friendships relevant to this user\r\n    const userFriendships = allFriendships.filter(\r\n      (f) => f.user1Id === user.id || f.user2Id === user.id\r\n    )\r\n\r\n    setFriendRequests(userRequests)\r\n    setFriendships(userFriendships)\r\n\r\n    console.log(\"[Friend Context] Loaded data for user:\", user.id, { userRequests, userFriendships })\r\n  }, [user])\r\n\r\n  // Load data when user changes\r\n  useEffect(() => {\r\n    loadUserData()\r\n  }, [user, loadUserData])\r\n\r\n  // Poll for changes every second\r\n  useEffect(() => {\r\n    if (!user) return\r\n\r\n    pollTimerRef.current = setInterval(() => {\r\n      loadUserData()\r\n    }, POLL_INTERVAL)\r\n\r\n    return () => {\r\n      if (pollTimerRef.current) {\r\n        clearInterval(pollTimerRef.current)\r\n      }\r\n    }\r\n  }, [user, loadUserData])\r\n\r\n  // Listen to storage changes from other tabs\r\n  useEffect(() => {\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === GLOBAL_REQUESTS_DB || e.key === GLOBAL_FRIENDSHIPS_DB) {\r\n        console.log(\"[Friend Context] Storage changed in another tab:\", e.key)\r\n        loadUserData()\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"storage\", handleStorageChange)\r\n    return () => window.removeEventListener(\"storage\", handleStorageChange)\r\n  }, [loadUserData])\r\n\r\n  const sendFriendRequest = useCallback(\r\n    (toUserId: string) => {\r\n      if (!user) {\r\n        console.log(\"[Friend Context] Cannot send request - no user logged in\")\r\n        return\r\n      }\r\n\r\n      console.log(\"[Friend Context] Sending request from\", user.id, \"to\", toUserId)\r\n\r\n      const allRequests = getAllRequestsFromDB()\r\n\r\n      // Check if request already exists\r\n      const exists = allRequests.some(\r\n        (r) =>\r\n          (r.fromUserId === user.id && r.toUserId === toUserId) ||\r\n          (r.fromUserId === toUserId && r.toUserId === user.id)\r\n      )\r\n\r\n      if (exists) {\r\n        console.log(\"[Friend Context] Request already exists\")\r\n        return\r\n      }\r\n\r\n      // Check if already friends\r\n      const allFriendships = getAllFriendshipsFromDB()\r\n      const isFriends = allFriendships.some(\r\n        (f) =>\r\n          (f.user1Id === user.id && f.user2Id === toUserId) ||\r\n          (f.user1Id === toUserId && f.user2Id === user.id)\r\n      )\r\n\r\n      if (isFriends) {\r\n        console.log(\"[Friend Context] Already friends\")\r\n        return\r\n      }\r\n\r\n      const newRequest: FriendRequest = {\r\n        id: `req-${Date.now()}`,\r\n        fromUserId: user.id,\r\n        toUserId,\r\n        status: \"pending\",\r\n        createdAt: new Date(),\r\n      }\r\n\r\n      const updatedRequests = [...allRequests, newRequest]\r\n      saveRequestsToDB(updatedRequests)\r\n\r\n      // Reload local state\r\n      setFriendRequests((prev) => [...prev, newRequest])\r\n\r\n      console.log(\"[Friend Context] Request sent:\", newRequest)\r\n    },\r\n    [user]\r\n  )\r\n\r\n  const acceptFriendRequest = useCallback(\r\n    (requestId: string) => {\r\n      const allRequests = getAllRequestsFromDB()\r\n      const request = allRequests.find((r) => r.id === requestId)\r\n\r\n      if (!request || request.status !== \"pending\") return\r\n\r\n      // Update request status\r\n      const updatedRequests = allRequests.map((r) =>\r\n        r.id === requestId ? { ...r, status: \"accepted\" as RequestStatus } : r\r\n      )\r\n      saveRequestsToDB(updatedRequests)\r\n\r\n      // Add friendship\r\n      const allFriendships = getAllFriendshipsFromDB()\r\n      const newFriendship: Friendship = {\r\n        id: `friend-${Date.now()}`,\r\n        user1Id: request.fromUserId,\r\n        user2Id: request.toUserId,\r\n        createdAt: new Date(),\r\n      }\r\n      const updatedFriendships = [...allFriendships, newFriendship]\r\n      saveFriendshipsToDB(updatedFriendships)\r\n\r\n      // Reload local state\r\n      setFriendRequests(updatedRequests.filter((r) => r.fromUserId === user?.id || r.toUserId === user?.id))\r\n      setFriendships(updatedFriendships.filter((f) => f.user1Id === user?.id || f.user2Id === user?.id))\r\n\r\n      console.log(\"[Friend Context] Request accepted:\", requestId)\r\n    },\r\n    [user]\r\n  )\r\n\r\n  const rejectFriendRequest = useCallback(\r\n    (requestId: string) => {\r\n      const allRequests = getAllRequestsFromDB()\r\n      const updatedRequests = allRequests.filter((r) => r.id !== requestId)\r\n      saveRequestsToDB(updatedRequests)\r\n\r\n      setFriendRequests((prev) => prev.filter((r) => r.id !== requestId))\r\n    },\r\n    []\r\n  )\r\n\r\n  const cancelFriendRequest = useCallback(\r\n    (requestId: string) => {\r\n      const allRequests = getAllRequestsFromDB()\r\n      const updatedRequests = allRequests.filter((r) => r.id !== requestId)\r\n      saveRequestsToDB(updatedRequests)\r\n\r\n      setFriendRequests((prev) => prev.filter((r) => r.id !== requestId))\r\n    },\r\n    []\r\n  )\r\n\r\n  const removeFriend = useCallback(\r\n    (friendshipId: string) => {\r\n      const allFriendships = getAllFriendshipsFromDB()\r\n      const updatedFriendships = allFriendships.filter((f) => f.id !== friendshipId)\r\n      saveFriendshipsToDB(updatedFriendships)\r\n\r\n      setFriendships((prev) => prev.filter((f) => f.id !== friendshipId))\r\n\r\n      // Also remove associated request\r\n      const friendship = allFriendships.find((f) => f.id === friendshipId)\r\n      if (friendship) {\r\n        const allRequests = getAllRequestsFromDB()\r\n        const updatedRequests = allRequests.filter(\r\n          (r) =>\r\n            !(\r\n              (r.fromUserId === friendship.user1Id && r.toUserId === friendship.user2Id) ||\r\n              (r.fromUserId === friendship.user2Id && r.toUserId === friendship.user1Id)\r\n            )\r\n        )\r\n        saveRequestsToDB(updatedRequests)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  const isFriend = useCallback(\r\n    (userId: string): boolean => {\r\n      if (!user) return false\r\n      return friendships.some(\r\n        (f) => (f.user1Id === user.id && f.user2Id === userId) || (f.user1Id === userId && f.user2Id === user.id)\r\n      )\r\n    },\r\n    [user, friendships]\r\n  )\r\n\r\n  const hasPendingRequestTo = useCallback(\r\n    (userId: string): boolean => {\r\n      if (!user) return false\r\n      return friendRequests.some(\r\n        (r) => r.fromUserId === user.id && r.toUserId === userId && r.status === \"pending\"\r\n      )\r\n    },\r\n    [user, friendRequests]\r\n  )\r\n\r\n  const hasPendingRequestFrom = useCallback(\r\n    (userId: string): boolean => {\r\n      if (!user) return false\r\n      return friendRequests.some(\r\n        (r) => r.fromUserId === userId && r.toUserId === user.id && r.status === \"pending\"\r\n      )\r\n    },\r\n    [user, friendRequests]\r\n  )\r\n\r\n  const getRequestStatus = useCallback(\r\n    (userId: string): \"none\" | \"sent\" | \"received\" | \"friends\" => {\r\n      if (isFriend(userId)) return \"friends\"\r\n      if (hasPendingRequestTo(userId)) return \"sent\"\r\n      if (hasPendingRequestFrom(userId)) return \"received\"\r\n      return \"none\"\r\n    },\r\n    [isFriend, hasPendingRequestTo, hasPendingRequestFrom]\r\n  )\r\n\r\n  const getIncomingRequests = useCallback((): FriendRequest[] => {\r\n    if (!user) return []\r\n    return friendRequests.filter((r) => r.toUserId === user.id && r.status === \"pending\")\r\n  }, [user, friendRequests])\r\n\r\n  const getOutgoingRequests = useCallback((): FriendRequest[] => {\r\n    if (!user) return []\r\n    return friendRequests.filter((r) => r.fromUserId === user.id && r.status === \"pending\")\r\n  }, [user, friendRequests])\r\n\r\n  const getFriendIds = useCallback((): string[] => {\r\n    if (!user) return []\r\n    return friendships.map((f) => (f.user1Id === user.id ? f.user2Id : f.user1Id))\r\n  }, [user, friendships])\r\n\r\n  const value: FriendContextType = {\r\n    friendRequests,\r\n    friendships,\r\n    sendFriendRequest,\r\n    acceptFriendRequest,\r\n    rejectFriendRequest,\r\n    cancelFriendRequest,\r\n    removeFriend,\r\n    isFriend,\r\n    hasPendingRequestTo,\r\n    hasPendingRequestFrom,\r\n    getRequestStatus,\r\n    getIncomingRequests,\r\n    getOutgoingRequests,\r\n    getFriendIds,\r\n  }\r\n\r\n  return <FriendContext.Provider value={value}>{children}</FriendContext.Provider>\r\n}\r\n\r\nexport function useFriend() {\r\n  const context = useContext(FriendContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useFriend must be used within a FriendProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1577, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/login-page.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Login Page Component\r\n *\r\n * Authentication page for existing users.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { useState } from \"react\"\r\nimport { MessageSquare, Mail, Lock, Eye, EyeOff } from \"lucide-react\"\r\nimport { useAuth } from \"@/context/auth-context\"\r\n\r\ninterface LoginPageProps {\r\n  onSwitchToRegister: () => void\r\n}\r\n\r\nexport function LoginPage({ onSwitchToRegister }: LoginPageProps) {\r\n  const { login, error, isLoading } = useAuth()\r\n\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [showPassword, setShowPassword] = useState(false)\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    await login(email, password)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-[var(--color-background)] p-4\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Logo */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"w-16 h-16 rounded-2xl bg-[var(--color-primary)] flex items-center justify-center mx-auto mb-4\">\r\n            <MessageSquare className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-[var(--color-foreground)]\">Welcome back</h1>\r\n          <p className=\"text-[var(--color-muted)] mt-1\">Sign in to continue to QuickChat</p>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <div className=\"bg-[var(--color-card)] rounded-2xl shadow-lg p-6\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Email */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Email</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"w-full pl-12 pr-4 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Password</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter your password\"\r\n                  className=\"w-full pl-12 pr-12 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--color-muted)] hover:text-[var(--color-foreground)]\"\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Error message */}\r\n            {error && (\r\n              <div className=\"p-3 rounded-lg bg-[var(--color-destructive)]/10 text-[var(--color-destructive)] text-sm\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            {/* Demo hint */}\r\n            <div className=\"p-3 rounded-lg bg-[var(--color-accent)] text-sm text-[var(--color-accent-foreground)]\">\r\n              <p className=\"font-medium\">Demo credentials:</p>\r\n              <p>Email: john@example.com | Password: any 6+ chars</p>\r\n            </div>\r\n\r\n            {/* Submit button */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full py-3 px-4 rounded-lg bg-[var(--color-primary)] text-white font-medium hover:bg-[var(--color-primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? \"Signing in...\" : \"Sign In\"}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Switch to register */}\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-[var(--color-muted)]\">\r\n              Don't have an account?{\" \"}\r\n              <button onClick={onSwitchToRegister} className=\"text-[var(--color-primary)] font-medium hover:underline\">\r\n                Sign up\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAXA;;;;AAiBO,SAAS,UAAU,EAAE,kBAAkB,EAAkB;;IAC9D,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,IAAA,sMAAO;IAE3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sOAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sOAAQ,EAAC;IAEjD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,MAAM,OAAO;IACrB;IAEA,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BAEb,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAI,WAAU;sCACb,cAAA,0PAAC,ySAAa;gCAAC,WAAU;;;;;;;;;;;sCAE3B,0PAAC;4BAAG,WAAU;sCAAoD;;;;;;sCAClE,0PAAC;4BAAE,WAAU;sCAAiC;;;;;;;;;;;;8BAIhD,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAK,UAAU;4BAAc,WAAU;;8CAEtC,0PAAC;;sDACC,0PAAC;4CAAM,WAAU;sDAAgE;;;;;;sDACjF,0PAAC;4CAAI,WAAU;;8DACb,0PAAC,0QAAI;oDAAC,WAAU;;;;;;8DAChB,0PAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oDACxC,aAAY;oDACZ,WAAU;oDACV,QAAQ;;;;;;;;;;;;;;;;;;8CAMd,0PAAC;;sDACC,0PAAC;4CAAM,WAAU;sDAAgE;;;;;;sDACjF,0PAAC;4CAAI,WAAU;;8DACb,0PAAC,0QAAI;oDAAC,WAAU;;;;;;8DAChB,0PAAC;oDACC,MAAM,eAAe,SAAS;oDAC9B,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,aAAY;oDACZ,WAAU;oDACV,QAAQ;;;;;;8DAEV,0PAAC;oDACC,MAAK;oDACL,SAAS,IAAM,gBAAgB,CAAC;oDAChC,WAAU;8DAET,6BAAe,0PAAC,oRAAM;wDAAC,WAAU;;;;;6EAAe,0PAAC,uQAAG;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;gCAMrE,uBACC,0PAAC;oCAAI,WAAU;8CACZ;;;;;;8CAKL,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CAAE,WAAU;sDAAc;;;;;;sDAC3B,0PAAC;sDAAE;;;;;;;;;;;;8CAIL,0PAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,YAAY,kBAAkB;;;;;;;;;;;;sCAKnC,0PAAC;4BAAI,WAAU;sCACb,cAAA,0PAAC;gCAAE,WAAU;;oCAA4B;oCAChB;kDACvB,0PAAC;wCAAO,SAAS;wCAAoB,WAAU;kDAA0D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASvH;GAtGgB;;QACsB,sMAAO;;;KAD7B"}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/register-page.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Register Page Component\r\n *\r\n * Registration page for new users.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { useState } from \"react\"\r\nimport { MessageSquare, Mail, Lock, User, Eye, EyeOff } from \"lucide-react\"\r\nimport { useAuth } from \"@/context/auth-context\"\r\n\r\ninterface RegisterPageProps {\r\n  onSwitchToLogin: () => void\r\n}\r\n\r\nexport function RegisterPage({ onSwitchToLogin }: RegisterPageProps) {\r\n  const { register, error, isLoading } = useAuth()\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\")\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [validationError, setValidationError] = useState(\"\")\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setValidationError(\"\")\r\n\r\n    if (password !== confirmPassword) {\r\n      setValidationError(\"Passwords do not match\")\r\n      return\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      setValidationError(\"Password must be at least 6 characters\")\r\n      return\r\n    }\r\n\r\n    await register(name, email, password)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-[var(--color-background)] p-4\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Logo */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"w-16 h-16 rounded-2xl bg-[var(--color-primary)] flex items-center justify-center mx-auto mb-4\">\r\n            <MessageSquare className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-[var(--color-foreground)]\">Create an account</h1>\r\n          <p className=\"text-[var(--color-muted)] mt-1\">Join QuickChat and start messaging</p>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <div className=\"bg-[var(--color-card)] rounded-2xl shadow-lg p-6\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Full Name</label>\r\n              <div className=\"relative\">\r\n                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  placeholder=\"Enter your name\"\r\n                  className=\"w-full pl-12 pr-4 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Email</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"w-full pl-12 pr-4 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Password</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Create a password\"\r\n                  className=\"w-full pl-12 pr-12 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--color-muted)] hover:text-[var(--color-foreground)]\"\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Confirm Password */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Confirm Password</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--color-muted)]\" />\r\n                <input\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  placeholder=\"Confirm your password\"\r\n                  className=\"w-full pl-12 pr-4 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Error message */}\r\n            {(error || validationError) && (\r\n              <div className=\"p-3 rounded-lg bg-[var(--color-destructive)]/10 text-[var(--color-destructive)] text-sm\">\r\n                {error || validationError}\r\n              </div>\r\n            )}\r\n\r\n            {/* Submit button */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full py-3 px-4 rounded-lg bg-[var(--color-primary)] text-white font-medium hover:bg-[var(--color-primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? \"Creating account...\" : \"Create Account\"}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Switch to login */}\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-[var(--color-muted)]\">\r\n              Already have an account?{\" \"}\r\n              <button onClick={onSwitchToLogin} className=\"text-[var(--color-primary)] font-medium hover:underline\">\r\n                Sign in\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2248, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/user-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useFriend } from \"@/context/friend-context\"\r\nimport { UserPlus, Clock, Check, MessageSquare, X, CheckCircle } from \"lucide-react\"\r\nimport { useState } from \"react\"\r\n\r\ninterface UserListProps {\r\n  onMobileClose?: () => void\r\n}\r\n\r\nexport function UserList({ onMobileClose }: UserListProps) {\r\n  const { availableUsers, createDirectChat } = useChat()\r\n  const { getRequestStatus, sendFriendRequest, cancelFriendRequest, getOutgoingRequests } = useFriend()\r\n  const [notification, setNotification] = useState<{ message: string; type: \"success\" | \"error\" } | null>(null)\r\n\r\n  const showNotification = (message: string, type: \"success\" | \"error\" = \"success\") => {\r\n    setNotification({ message, type })\r\n    // Also show browser alert so user definitely sees it\r\n    alert(message)\r\n    setTimeout(() => setNotification(null), 5000)\r\n  }\r\n\r\n  const handleSendRequest = (userId: string) => {\r\n    const user = availableUsers.find((u) => u.id === userId)\r\n    sendFriendRequest(userId)\r\n    showNotification(`Friend request sent to ${user?.name || \"user\"}!`, \"success\")\r\n  }\r\n\r\n  const handleCancelRequest = (userId: string) => {\r\n    const outgoing = getOutgoingRequests()\r\n    const request = outgoing.find((r) => r.toUserId === userId)\r\n    if (request) {\r\n      cancelFriendRequest(request.id)\r\n      showNotification(\"Friend request cancelled\", \"success\")\r\n    }\r\n  }\r\n\r\n  const handleStartChat = (userId: string) => {\r\n    createDirectChat(userId)\r\n    onMobileClose?.()\r\n  }\r\n\r\n  // Group users by online status\r\n  const onlineUsers = availableUsers.filter((u) => u.status === \"online\")\r\n  const offlineUsers = availableUsers.filter((u) => u.status !== \"online\")\r\n\r\n  const renderUserAction = (userId: string) => {\r\n    const status = getRequestStatus(userId)\r\n\r\n    switch (status) {\r\n      case \"friends\":\r\n        return (\r\n          <button\r\n            onClick={() => handleStartChat(userId)}\r\n            className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--color-primary)] text-white rounded-full text-xs font-medium hover:bg-[var(--color-primary-hover)] transition-colors\"\r\n          >\r\n            <MessageSquare className=\"w-3.5 h-3.5\" />\r\n            Chat\r\n          </button>\r\n        )\r\n      case \"sent\":\r\n        return (\r\n          <button\r\n            onClick={() => handleCancelRequest(userId)}\r\n            className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--color-muted)] text-[var(--color-muted-foreground)] rounded-full text-xs font-medium hover:bg-red-100 hover:text-red-600 transition-colors group\"\r\n          >\r\n            <Clock className=\"w-3.5 h-3.5 group-hover:hidden\" />\r\n            <X className=\"w-3.5 h-3.5 hidden group-hover:block\" />\r\n            <span className=\"group-hover:hidden\">Pending</span>\r\n            <span className=\"hidden group-hover:block\">Cancel</span>\r\n          </button>\r\n        )\r\n      case \"received\":\r\n        return (\r\n          <span className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--color-accent)] text-[var(--color-primary)] rounded-full text-xs font-medium\">\r\n            <Check className=\"w-3.5 h-3.5\" />\r\n            Respond in Requests\r\n          </span>\r\n        )\r\n      default:\r\n        return (\r\n          <button\r\n            onClick={() => handleSendRequest(userId)}\r\n            className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--color-secondary)] text-[var(--color-foreground)] rounded-full text-xs font-medium hover:bg-[var(--color-primary)] hover:text-white transition-colors\"\r\n          >\r\n            <UserPlus className=\"w-3.5 h-3.5\" />\r\n            Add Friend\r\n          </button>\r\n        )\r\n    }\r\n  }\r\n\r\n  const renderUserSection = (users: typeof availableUsers, title: string, isOnline: boolean) => {\r\n    if (users.length === 0) return null\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"px-4 py-2 bg-[var(--color-secondary)]\">\r\n          <h4 className=\"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide\">\r\n            {title}  {users.length}\r\n          </h4>\r\n        </div>\r\n        {users.map((user) => (\r\n          <div\r\n            key={user.id}\r\n            className=\"w-full p-3 flex items-center gap-3 hover:bg-[var(--color-secondary)] transition-colors\"\r\n          >\r\n            <div className=\"relative\">\r\n              <img\r\n                src={user.avatar || \"/placeholder.svg\"}\r\n                alt={user.name}\r\n                className=\"w-10 h-10 rounded-full object-cover\"\r\n              />\r\n              <span\r\n                className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${\r\n                  isOnline ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n                }`}\r\n              />\r\n            </div>\r\n            <div className=\"flex-1 text-left\">\r\n              <h3 className=\"font-medium text-[var(--color-foreground)]\">{user.name}</h3>\r\n              <p className={`text-xs ${isOnline ? \"text-[var(--color-online)]\" : \"text-[var(--color-muted)]\"}`}>\r\n                {isOnline ? \"Online\" : user.lastSeen ? `Last seen ${user.lastSeen}` : \"Offline\"}\r\n              </p>\r\n            </div>\r\n            {renderUserAction(user.id)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"divide-y divide-[var(--color-border)]\">\r\n      {notification && (\r\n        <div\r\n          className={`p-3 flex items-center gap-2 ${\r\n            notification.type === \"success\" ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\r\n          }`}\r\n        >\r\n          <CheckCircle className=\"w-5 h-5\" />\r\n          <span className=\"font-medium\">{notification.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      {availableUsers.length === 0 ? (\r\n        <div className=\"p-8 text-center text-[var(--color-muted)]\">\r\n          <UserPlus className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n          <p>No users found</p>\r\n          <p className=\"text-sm mt-1\">Invite friends to join!</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {renderUserSection(onlineUsers, \"Online\", true)}\r\n          {renderUserSection(offlineUsers, \"Offline\", false)}\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2581, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/utils/dummy-users.ts"],"sourcesContent":["/**\r\n * QuickChat - Dummy Users Data\r\n *\r\n * This file contains mock user data for development and testing.\r\n * In production, this would be replaced with actual API calls.\r\n */\r\n\r\nexport interface User {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  avatar: string\r\n  status: \"online\" | \"offline\" | \"away\"\r\n  lastSeen?: string\r\n}\r\n\r\nexport const dummyUsers: User[] = [\r\n  // Start with an empty seed so only users created at runtime are shown\r\n]\r\n\r\nconst REGISTERED_USERS_KEY = \"quickchat_registered_users\"\r\n\r\n/**\r\n * Get all registered users from localStorage\r\n */\r\nexport const getRegisteredUsers = (): User[] => {\r\n  if (typeof window === \"undefined\") return []\r\n  try {\r\n    const stored = localStorage.getItem(REGISTERED_USERS_KEY)\r\n    return stored ? JSON.parse(stored) : []\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n * Save a new registered user to localStorage\r\n */\r\nexport const saveRegisteredUser = (user: User): void => {\r\n  if (typeof window === \"undefined\") return\r\n  const registered = getRegisteredUsers()\r\n  // Check if user already exists\r\n  if (!registered.find((u) => u.id === user.id || u.email === user.email)) {\r\n    registered.push(user)\r\n    localStorage.setItem(REGISTERED_USERS_KEY, JSON.stringify(registered))\r\n  }\r\n}\r\n\r\n/**\r\n * Get ALL users (dummy + registered)\r\n */\r\nexport const getAllUsers = (): User[] => {\r\n  // Only return registered users. The app will display only users created at runtime.\r\n  return getRegisteredUsers()\r\n}\r\n\r\n/**\r\n * Get user by ID (checks both dummy and registered)\r\n */\r\nexport const getUserById = (id: string): User | undefined => {\r\n  return getAllUsers().find((user) => user.id === id)\r\n}\r\n\r\n/**\r\n * Get users by IDs\r\n */\r\nexport const getUsersByIds = (ids: string[]): User[] => {\r\n  return getAllUsers().filter((user) => ids.includes(user.id))\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;;;;AAWM,MAAM,aAAqB,EAEjC;AAED,MAAM,uBAAuB;AAKtB,MAAM,qBAAqB;IAChC;;IACA,IAAI;QACF,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,OAAO,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IACzC,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAKO,MAAM,qBAAqB,CAAC;IACjC;;IACA,MAAM,aAAa;IACnB,+BAA+B;IAC/B,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE,IAAI,EAAE,KAAK,KAAK,KAAK,KAAK,GAAG;QACvE,WAAW,IAAI,CAAC;QAChB,aAAa,OAAO,CAAC,sBAAsB,KAAK,SAAS,CAAC;IAC5D;AACF;AAKO,MAAM,cAAc;IACzB,oFAAoF;IACpF,OAAO;AACT;AAKO,MAAM,cAAc,CAAC;IAC1B,OAAO,cAAc,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;AAClD;AAKO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,cAAc,MAAM,CAAC,CAAC,OAAS,IAAI,QAAQ,CAAC,KAAK,EAAE;AAC5D"}},
    {"offset": {"line": 2639, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/friend-requests.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Friend Requests Component\r\n *\r\n * Displays incoming and outgoing friend requests with accept/reject actions.\r\n */\r\n\r\nimport { useFriend } from \"@/context/friend-context\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useAuth } from \"@/context/auth-context\"\r\nimport { Check, X, Clock, UserPlus, Send } from \"lucide-react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { getAllUsers, type User } from \"@/utils/dummy-users\"\r\n\r\ninterface FriendRequestsProps {\r\n  onMobileClose?: () => void\r\n}\r\n\r\nexport function FriendRequests({ onMobileClose }: FriendRequestsProps) {\r\n  const { user } = useAuth()\r\n  const {\r\n    getIncomingRequests,\r\n    getOutgoingRequests,\r\n    acceptFriendRequest,\r\n    rejectFriendRequest,\r\n    cancelFriendRequest,\r\n    friendRequests,\r\n  } = useFriend()\r\n  const { availableUsers } = useChat()\r\n\r\n  const [allUsers, setAllUsers] = useState<User[]>([])\r\n\r\n  useEffect(() => {\r\n    // Refresh users list every second to ensure we have latest registered users\r\n    const refreshUsers = () => {\r\n      setAllUsers(getAllUsers())\r\n    }\r\n    refreshUsers()\r\n    const interval = setInterval(refreshUsers, 1000)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  const incomingRequests = getIncomingRequests()\r\n  const outgoingRequests = getOutgoingRequests()\r\n\r\n  const getUserById = (userId: string) => {\r\n    // First check allUsers, then fall back to availableUsers\r\n    return allUsers.find((u) => u.id === userId) || availableUsers.find((u) => u.id === userId)\r\n  }\r\n\r\n  const handleAccept = (requestId: string) => {\r\n    acceptFriendRequest(requestId)\r\n  }\r\n\r\n  const handleReject = (requestId: string) => {\r\n    rejectFriendRequest(requestId)\r\n  }\r\n\r\n  const handleCancel = (requestId: string) => {\r\n    cancelFriendRequest(requestId)\r\n  }\r\n\r\n  if (incomingRequests.length === 0 && outgoingRequests.length === 0) {\r\n    return (\r\n      <div className=\"p-8 text-center text-[var(--color-muted)]\">\r\n        <UserPlus className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n        <p>No friend requests</p>\r\n        <p className=\"text-sm mt-1\">Send requests from the Users tab</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"divide-y divide-[var(--color-border)]\">\r\n      {/* Incoming Requests */}\r\n      {incomingRequests.length > 0 && (\r\n        <div>\r\n          <div className=\"px-4 py-2 bg-[var(--color-secondary)]\">\r\n            <h4 className=\"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide flex items-center gap-2\">\r\n              <UserPlus className=\"w-3.5 h-3.5\" />\r\n              Incoming Requests  {incomingRequests.length}\r\n            </h4>\r\n          </div>\r\n          {incomingRequests.map((request) => {\r\n            const fromUser = getUserById(request.fromUserId)\r\n\r\n            return (\r\n              <div\r\n                key={request.id}\r\n                className=\"p-3 flex items-center gap-3 hover:bg-[var(--color-secondary)] transition-colors\"\r\n              >\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={fromUser?.avatar || \"/placeholder.svg?height=40&width=40&query=user avatar\"}\r\n                    alt={fromUser?.name || \"User\"}\r\n                    className=\"w-10 h-10 rounded-full object-cover\"\r\n                  />\r\n                  <span\r\n                    className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${\r\n                      fromUser?.status === \"online\" ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"font-medium text-[var(--color-foreground)]\">{fromUser?.name || \"Unknown User\"}</h3>\r\n                  <p className=\"text-xs text-[var(--color-muted)]\">Wants to connect with you</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => handleAccept(request.id)}\r\n                    className=\"p-2 bg-[var(--color-primary)] text-white rounded-full hover:bg-[var(--color-primary-hover)] transition-colors\"\r\n                    title=\"Accept\"\r\n                  >\r\n                    <Check className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleReject(request.id)}\r\n                    className=\"p-2 bg-[var(--color-muted)] text-[var(--color-muted-foreground)] rounded-full hover:bg-red-100 hover:text-red-600 transition-colors\"\r\n                    title=\"Reject\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Outgoing Requests */}\r\n      {outgoingRequests.length > 0 && (\r\n        <div>\r\n          <div className=\"px-4 py-2 bg-[var(--color-secondary)]\">\r\n            <h4 className=\"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide flex items-center gap-2\">\r\n              <Send className=\"w-3.5 h-3.5\" />\r\n              Sent Requests  {outgoingRequests.length}\r\n            </h4>\r\n          </div>\r\n          {outgoingRequests.map((request) => {\r\n            const toUser = getUserById(request.toUserId)\r\n\r\n            return (\r\n              <div\r\n                key={request.id}\r\n                className=\"p-3 flex items-center gap-3 hover:bg-[var(--color-secondary)] transition-colors\"\r\n              >\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={toUser?.avatar || \"/placeholder.svg?height=40&width=40&query=user avatar\"}\r\n                    alt={toUser?.name || \"User\"}\r\n                    className=\"w-10 h-10 rounded-full object-cover\"\r\n                  />\r\n                  <span\r\n                    className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${\r\n                      toUser?.status === \"online\" ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"font-medium text-[var(--color-foreground)]\">{toUser?.name || \"Unknown User\"}</h3>\r\n                  <p className=\"text-xs text-[var(--color-muted)] flex items-center gap-1\">\r\n                    <Clock className=\"w-3 h-3\" />\r\n                    Awaiting response\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleCancel(request.id)}\r\n                  className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--color-muted)] text-[var(--color-muted-foreground)] rounded-full text-xs font-medium hover:bg-red-100 hover:text-red-600 transition-colors\"\r\n                >\r\n                  <X className=\"w-3.5 h-3.5\" />\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;CAIC,GAED;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AAbA;;;;;;;AAmBO,SAAS,eAAe,EAAE,aAAa,EAAuB;;IACnE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,sMAAO;IACxB,MAAM,EACJ,mBAAmB,EACnB,mBAAmB,EACnB,mBAAmB,EACnB,mBAAmB,EACnB,mBAAmB,EACnB,cAAc,EACf,GAAG,IAAA,0MAAS;IACb,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,sMAAO;IAElC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAS,EAAE;IAEnD,IAAA,uOAAS;oCAAC;YACR,4EAA4E;YAC5E,MAAM;yDAAe;oBACnB,YAAY,IAAA,sMAAW;gBACzB;;YACA;YACA,MAAM,WAAW,YAAY,cAAc;YAC3C;4CAAO,IAAM,cAAc;;QAC7B;mCAAG,EAAE;IAEL,MAAM,mBAAmB;IACzB,MAAM,mBAAmB;IAEzB,MAAM,cAAc,CAAC;QACnB,yDAAyD;QACzD,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,WAAW,eAAe,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACtF;IAEA,MAAM,eAAe,CAAC;QACpB,oBAAoB;IACtB;IAEA,MAAM,eAAe,CAAC;QACpB,oBAAoB;IACtB;IAEA,MAAM,eAAe,CAAC;QACpB,oBAAoB;IACtB;IAEA,IAAI,iBAAiB,MAAM,KAAK,KAAK,iBAAiB,MAAM,KAAK,GAAG;QAClE,qBACE,0PAAC;YAAI,WAAU;;8BACb,0PAAC,0RAAQ;oBAAC,WAAU;;;;;;8BACpB,0PAAC;8BAAE;;;;;;8BACH,0PAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;IAEA,qBACE,0PAAC;QAAI,WAAU;;YAEZ,iBAAiB,MAAM,GAAG,mBACzB,0PAAC;;kCACC,0PAAC;wBAAI,WAAU;kCACb,cAAA,0PAAC;4BAAG,WAAU;;8CACZ,0PAAC,0RAAQ;oCAAC,WAAU;;;;;;gCAAgB;gCACf,iBAAiB,MAAM;;;;;;;;;;;;oBAG/C,iBAAiB,GAAG,CAAC,CAAC;wBACrB,MAAM,WAAW,YAAY,QAAQ,UAAU;wBAE/C,qBACE,0PAAC;4BAEC,WAAU;;8CAEV,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CACC,KAAK,UAAU,UAAU;4CACzB,KAAK,UAAU,QAAQ;4CACvB,WAAU;;;;;;sDAEZ,0PAAC;4CACC,WAAW,CAAC,qEAAqE,EAC/E,UAAU,WAAW,WAAW,6BAA6B,6BAC7D;;;;;;;;;;;;8CAGN,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CAAG,WAAU;sDAA8C,UAAU,QAAQ;;;;;;sDAC9E,0PAAC;4CAAE,WAAU;sDAAoC;;;;;;;;;;;;8CAEnD,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CACC,SAAS,IAAM,aAAa,QAAQ,EAAE;4CACtC,WAAU;4CACV,OAAM;sDAEN,cAAA,0PAAC,6QAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,0PAAC;4CACC,SAAS,IAAM,aAAa,QAAQ,EAAE;4CACtC,WAAU;4CACV,OAAM;sDAEN,cAAA,0PAAC,iQAAC;gDAAC,WAAU;;;;;;;;;;;;;;;;;;2BAhCZ,QAAQ,EAAE;;;;;oBAqCrB;;;;;;;YAKH,iBAAiB,MAAM,GAAG,mBACzB,0PAAC;;kCACC,0PAAC;wBAAI,WAAU;kCACb,cAAA,0PAAC;4BAAG,WAAU;;8CACZ,0PAAC,0QAAI;oCAAC,WAAU;;;;;;gCAAgB;gCACf,iBAAiB,MAAM;;;;;;;;;;;;oBAG3C,iBAAiB,GAAG,CAAC,CAAC;wBACrB,MAAM,SAAS,YAAY,QAAQ,QAAQ;wBAE3C,qBACE,0PAAC;4BAEC,WAAU;;8CAEV,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CACC,KAAK,QAAQ,UAAU;4CACvB,KAAK,QAAQ,QAAQ;4CACrB,WAAU;;;;;;sDAEZ,0PAAC;4CACC,WAAW,CAAC,qEAAqE,EAC/E,QAAQ,WAAW,WAAW,6BAA6B,6BAC3D;;;;;;;;;;;;8CAGN,0PAAC;oCAAI,WAAU;;sDACb,0PAAC;4CAAG,WAAU;sDAA8C,QAAQ,QAAQ;;;;;;sDAC5E,0PAAC;4CAAE,WAAU;;8DACX,0PAAC,6QAAK;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;8CAIjC,0PAAC;oCACC,SAAS,IAAM,aAAa,QAAQ,EAAE;oCACtC,WAAU;;sDAEV,0PAAC,iQAAC;4CAAC,WAAU;;;;;;wCAAgB;;;;;;;;2BA1B1B,QAAQ,EAAE;;;;;oBA+BrB;;;;;;;;;;;;;AAKV;GAjKgB;;QACG,sMAAO;QAQpB,0MAAS;QACc,sMAAO;;;KAVpB"}},
    {"offset": {"line": 3021, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/group-creation-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Group Creation Modal\r\n *\r\n * Modal dialog for creating new group chats with selected participants.\r\n * Only shows friends (users who have accepted friend requests).\r\n */\r\n\r\nimport { useState } from \"react\"\r\nimport { X, Check, Users, UserPlus } from \"lucide-react\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useFriend } from \"@/context/friend-context\"\r\n\r\ninterface GroupCreationModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport function GroupCreationModal({ isOpen, onClose }: GroupCreationModalProps) {\r\n  const { availableUsers, createGroupChat } = useChat()\r\n  const { isFriend } = useFriend()\r\n\r\n  const [groupName, setGroupName] = useState(\"\")\r\n  const [selectedUsers, setSelectedUsers] = useState<string[]>([])\r\n\r\n  const friendUsers = availableUsers.filter((user) => isFriend(user.id))\r\n\r\n  const handleToggleUser = (userId: string) => {\r\n    setSelectedUsers((prev) => (prev.includes(userId) ? prev.filter((id) => id !== userId) : [...prev, userId]))\r\n  }\r\n\r\n  const handleCreate = () => {\r\n    if (groupName.trim() && selectedUsers.length >= 1) {\r\n      createGroupChat(groupName.trim(), selectedUsers)\r\n      handleClose()\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setGroupName(\"\")\r\n    setSelectedUsers([])\r\n    onClose()\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-[var(--color-card)] rounded-2xl w-full max-w-md shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-full bg-[var(--color-primary)] flex items-center justify-center\">\r\n              <Users className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <h2 className=\"text-lg font-semibold text-[var(--color-foreground)]\">New Group</h2>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-4\">\r\n          {/* Group Name Input */}\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">Group Name</label>\r\n            <input\r\n              type=\"text\"\r\n              value={groupName}\r\n              onChange={(e) => setGroupName(e.target.value)}\r\n              placeholder=\"Enter group name...\"\r\n              className=\"w-full px-4 py-3 bg-[var(--color-input)] rounded-lg text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n            />\r\n          </div>\r\n\r\n          {/* User Selection - Only Friends */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-[var(--color-foreground)] mb-2\">\r\n              Add Friends ({selectedUsers.length} selected)\r\n            </label>\r\n            <div className=\"max-h-60 overflow-y-auto custom-scrollbar border border-[var(--color-border)] rounded-lg\">\r\n              {friendUsers.length === 0 ? (\r\n                <div className=\"p-6 text-center text-[var(--color-muted)]\">\r\n                  <UserPlus className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\r\n                  <p className=\"font-medium\">No friends yet</p>\r\n                  <p className=\"text-sm mt-1\">Add friends from the Users tab first</p>\r\n                </div>\r\n              ) : (\r\n                friendUsers.map((user) => {\r\n                  const isSelected = selectedUsers.includes(user.id)\r\n\r\n                  return (\r\n                    <button\r\n                      key={user.id}\r\n                      onClick={() => handleToggleUser(user.id)}\r\n                      className={`w-full p-3 flex items-center gap-3 hover:bg-[var(--color-secondary)] transition-colors ${\r\n                        isSelected ? \"bg-[var(--color-accent)]\" : \"\"\r\n                      }`}\r\n                    >\r\n                      <img\r\n                        src={user.avatar || \"/placeholder.svg\"}\r\n                        alt={user.name}\r\n                        className=\"w-10 h-10 rounded-full object-cover\"\r\n                      />\r\n                      <span className=\"flex-1 text-left font-medium text-[var(--color-foreground)]\">{user.name}</span>\r\n                      <div\r\n                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${\r\n                          isSelected\r\n                            ? \"bg-[var(--color-primary)] border-[var(--color-primary)]\"\r\n                            : \"border-[var(--color-border)]\"\r\n                        }`}\r\n                      >\r\n                        {isSelected && <Check className=\"w-4 h-4 text-white\" />}\r\n                      </div>\r\n                    </button>\r\n                  )\r\n                })\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex gap-3 p-4 border-t border-[var(--color-border)]\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"flex-1 py-3 px-4 rounded-lg border border-[var(--color-border)] font-medium text-[var(--color-foreground)] hover:bg-[var(--color-secondary)] transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleCreate}\r\n            disabled={!groupName.trim() || selectedUsers.length < 1 || friendUsers.length === 0}\r\n            className=\"flex-1 py-3 px-4 rounded-lg bg-[var(--color-primary)] font-medium text-white hover:bg-[var(--color-primary-hover)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Create Group\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/sidebar.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Sidebar Component\r\n *\r\n * Main navigation sidebar showing chat list, user profile,\r\n * and actions for creating new chats.\r\n */\r\n\r\nimport { useState } from \"react\"\r\nimport { Search, Plus, LogOut, Users, MessageSquare, UserPlus } from \"lucide-react\"\r\nimport { useAuth } from \"@/context/auth-context\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useSocket } from \"@/context/socket-context\"\r\nimport { useFriend } from \"@/context/friend-context\"\r\nimport { formatDistanceToNow } from \"date-fns\"\r\nimport { UserList } from \"./user-list\"\r\nimport { FriendRequests } from \"./friend-requests\"\r\nimport { GroupCreationModal } from \"./group-creation-modal\"\r\n\r\ninterface SidebarProps {\r\n  onMobileClose?: () => void\r\n}\r\n\r\nexport function Sidebar({ onMobileClose }: SidebarProps) {\r\n  const { user, logout } = useAuth()\r\n  const { chats, selectedChat, selectChat, getChatName, getChatAvatar, getOtherParticipant } = useChat()\r\n  const { isConnected } = useSocket()\r\n  const { getIncomingRequests } = useFriend()\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\")\r\n  const [activeTab, setActiveTab] = useState<\"chats\" | \"users\" | \"requests\">(\"chats\")\r\n  const [showGroupModal, setShowGroupModal] = useState(false)\r\n\r\n  // Get incoming requests count for badge\r\n  const incomingRequestsCount = getIncomingRequests().length\r\n\r\n  // Filter chats based on search query\r\n  const filteredChats = chats.filter((chat) => getChatName(chat).toLowerCase().includes(searchQuery.toLowerCase()))\r\n\r\n  // Sort chats by last message timestamp\r\n  const sortedChats = [...filteredChats].sort((a, b) => {\r\n    const aTime = a.lastMessage?.timestamp || a.createdAt\r\n    const bTime = b.lastMessage?.timestamp || b.createdAt\r\n    return new Date(bTime).getTime() - new Date(aTime).getTime()\r\n  })\r\n\r\n  const handleChatSelect = (chatId: string) => {\r\n    selectChat(chatId)\r\n    onMobileClose?.()\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-[var(--color-sidebar)] border-r border-[var(--color-border)]\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-[var(--color-border)]\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"relative\">\r\n            <img\r\n              src={user?.avatar || \"/placeholder.svg\"}\r\n              alt={user?.name}\r\n              className=\"w-10 h-10 rounded-full object-cover\"\r\n            />\r\n            <span\r\n              className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${\r\n                isConnected ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n              }`}\r\n            />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"font-semibold text-[var(--color-foreground)]\">{user?.name}</h2>\r\n            <p className=\"text-xs text-[var(--color-muted)]\">{isConnected ? \"Online\" : \"Connecting...\"}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setShowGroupModal(true)}\r\n            className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\"\r\n            title=\"New Group\"\r\n          >\r\n            <Plus className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n          </button>\r\n          <button\r\n            onClick={logout}\r\n            className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\"\r\n            title=\"Logout\"\r\n          >\r\n            <LogOut className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"p-3\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--color-muted)]\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search or start new chat\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 bg-[var(--color-input)] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] text-[var(--color-foreground)] placeholder:text-[var(--color-muted)]\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex border-b border-[var(--color-border)]\">\r\n        <button\r\n          onClick={() => setActiveTab(\"chats\")}\r\n          className={`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${\r\n            activeTab === \"chats\"\r\n              ? \"text-[var(--color-primary)] border-b-2 border-[var(--color-primary)]\"\r\n              : \"text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]\"\r\n          }`}\r\n        >\r\n          <MessageSquare className=\"w-4 h-4\" />\r\n          Chats\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"users\")}\r\n          className={`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${\r\n            activeTab === \"users\"\r\n              ? \"text-[var(--color-primary)] border-b-2 border-[var(--color-primary)]\"\r\n              : \"text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]\"\r\n          }`}\r\n        >\r\n          <Users className=\"w-4 h-4\" />\r\n          Users\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"requests\")}\r\n          className={`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors relative ${\r\n            activeTab === \"requests\"\r\n              ? \"text-[var(--color-primary)] border-b-2 border-[var(--color-primary)]\"\r\n              : \"text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]\"\r\n          }`}\r\n        >\r\n          <UserPlus className=\"w-4 h-4\" />\r\n          Requests\r\n          {incomingRequestsCount > 0 && (\r\n            <span className=\"absolute top-2 right-2 w-5 h-5 flex items-center justify-center text-xs font-bold text-white bg-red-500 rounded-full\">\r\n              {incomingRequestsCount}\r\n            </span>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n        {activeTab === \"chats\" ? (\r\n          <div className=\"divide-y divide-[var(--color-border)]\">\r\n            {sortedChats.length === 0 ? (\r\n              <div className=\"p-8 text-center text-[var(--color-muted)]\">\r\n                <MessageSquare className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n                <p>No chats found</p>\r\n                <p className=\"text-sm mt-1\">Add friends to start chatting!</p>\r\n              </div>\r\n            ) : (\r\n              sortedChats.map((chat) => {\r\n                const otherUser = getOtherParticipant(chat)\r\n                const isSelected = selectedChat?.id === chat.id\r\n\r\n                return (\r\n                  <button\r\n                    key={chat.id}\r\n                    onClick={() => handleChatSelect(chat.id)}\r\n                    className={`w-full p-3 flex items-center gap-3 hover:bg-[var(--color-secondary)] transition-colors ${\r\n                      isSelected ? \"bg-[var(--color-accent)]\" : \"\"\r\n                    }`}\r\n                  >\r\n                    <div className=\"relative flex-shrink-0\">\r\n                      <img\r\n                        src={getChatAvatar(chat) || \"/placeholder.svg\"}\r\n                        alt={getChatName(chat)}\r\n                        className=\"w-12 h-12 rounded-full object-cover\"\r\n                      />\r\n                      {chat.type === \"direct\" && otherUser && (\r\n                        <span\r\n                          className={`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white ${\r\n                            otherUser.status === \"online\" ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n                          }`}\r\n                        />\r\n                      )}\r\n                      {chat.type === \"group\" && (\r\n                        <span className=\"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-[var(--color-primary)] flex items-center justify-center\">\r\n                          <Users className=\"w-3 h-3 text-white\" />\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 min-w-0 text-left\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <h3 className=\"font-medium text-[var(--color-foreground)] truncate\">{getChatName(chat)}</h3>\r\n                        {chat.lastMessage && (\r\n                          <span className=\"text-xs text-[var(--color-muted)]\">\r\n                            {formatDistanceToNow(new Date(chat.lastMessage.timestamp), {\r\n                              addSuffix: false,\r\n                            })}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center justify-between mt-0.5\">\r\n                        <p className=\"text-sm text-[var(--color-muted-foreground)] truncate\">\r\n                          {chat.lastMessage?.content || \"No messages yet\"}\r\n                        </p>\r\n                        {chat.unreadCount > 0 && (\r\n                          <span className=\"ml-2 px-2 py-0.5 text-xs font-medium text-white bg-[var(--color-primary)] rounded-full\">\r\n                            {chat.unreadCount}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </button>\r\n                )\r\n              })\r\n            )}\r\n          </div>\r\n        ) : activeTab === \"users\" ? (\r\n          <UserList onMobileClose={onMobileClose} />\r\n        ) : (\r\n          <FriendRequests onMobileClose={onMobileClose} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Group Creation Modal */}\r\n      <GroupCreationModal isOpen={showGroupModal} onClose={() => setShowGroupModal(false)} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3807, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sOAAO,EAAC,IAAA,6MAAI,EAAC;AACtB"}},
    {"offset": {"line": 3825, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uOAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wOAAI,GAAG;IAE9B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,kLAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 3890, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/ui/alert-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'\r\n\r\nimport { cn } from '@/lib/utils'\r\nimport { buttonVariants } from '@/components/ui/button'\r\n\r\nfunction AlertDialog({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\r\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\r\n}\r\n\r\nfunction AlertDialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\r\n  return (\r\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\r\n  )\r\n}\r\n\r\nfunction AlertDialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\r\n  return (\r\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\r\n  )\r\n}\r\n\r\nfunction AlertDialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\r\n  return (\r\n    <AlertDialogPrimitive.Overlay\r\n      data-slot=\"alert-dialog-overlay\"\r\n      className={cn(\r\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\r\n  return (\r\n    <AlertDialogPortal>\r\n      <AlertDialogOverlay />\r\n      <AlertDialogPrimitive.Content\r\n        data-slot=\"alert-dialog-content\"\r\n        className={cn(\r\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    </AlertDialogPortal>\r\n  )\r\n}\r\n\r\nfunction AlertDialogHeader({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-dialog-header\"\r\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogFooter({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-dialog-footer\"\r\n      className={cn(\r\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\r\n  return (\r\n    <AlertDialogPrimitive.Title\r\n      data-slot=\"alert-dialog-title\"\r\n      className={cn('text-lg font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\r\n  return (\r\n    <AlertDialogPrimitive.Description\r\n      data-slot=\"alert-dialog-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogAction({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\r\n  return (\r\n    <AlertDialogPrimitive.Action\r\n      className={cn(buttonVariants(), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogCancel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\r\n  return (\r\n    <AlertDialogPrimitive.Cancel\r\n      className={cn(buttonVariants({ variant: 'outline' }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,0PAAC,mPAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;KAJS;AAMT,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,0PAAC,sPAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;MANS;AAQT,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,0PAAC,qPAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;MANS;AAQT,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,0PAAC,sPAA4B;QAC3B,aAAU;QACV,WAAW,IAAA,kLAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,0PAAC;;0BACC,0PAAC;;;;;0BACD,0PAAC,sPAA4B;gBAC3B,aAAU;gBACV,WAAW,IAAA,kLAAE,EACX,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;MAjBS;AAmBT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,kLAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,kLAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,0PAAC,oPAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kLAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,0PAAC,0PAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kLAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,0PAAC,qPAA2B;QAC1B,WAAW,IAAA,kLAAE,EAAC,IAAA,6MAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGf;MAVS;AAYT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,0PAAC,qPAA2B;QAC1B,WAAW,IAAA,kLAAE,EAAC,IAAA,6MAAc,EAAC;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf;OAVS"}},
    {"offset": {"line": 4085, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/chat-header.tsx"],"sourcesContent":["\"use client\"\r\nimport { ArrowLeft, Phone, Video, MoreVertical, Users, Trash2 } from \"lucide-react\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { dummyUsers } from \"@/utils/dummy-users\"\r\nimport { useState } from \"react\"\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\"\r\n\r\ninterface ChatHeaderProps {\r\n  onBackClick?: () => void\r\n}\r\n\r\nexport function ChatHeader({ onBackClick }: ChatHeaderProps) {\r\n  const { selectedChat, getChatName, getChatAvatar, getOtherParticipant, typingUsers, deleteChat } = useChat()\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\r\n\r\n  if (!selectedChat) return null\r\n\r\n  const otherUser = getOtherParticipant(selectedChat)\r\n  const chatTypingUsers = typingUsers[selectedChat.id] || []\r\n  const isTyping = chatTypingUsers.length > 0\r\n\r\n  // Get participant names for group chats\r\n  const getParticipantNames = () => {\r\n    if (selectedChat.type !== \"group\") return \"\"\r\n\r\n    return selectedChat.participants.map((id) => dummyUsers.find((u) => u.id === id)?.name || \"Unknown\").join(\", \")\r\n  }\r\n\r\n  // Get typing indicator text\r\n  const getTypingText = () => {\r\n    if (!isTyping) return null\r\n\r\n    const typingNames = chatTypingUsers.map((id) => dummyUsers.find((u) => u.id === id)?.name || \"Someone\").join(\", \")\r\n\r\n    return `${typingNames} is typing...`\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between px-4 py-3 bg-[var(--color-card)] border-b border-[var(--color-border)]\">\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* Back button for mobile */}\r\n        <button\r\n          onClick={onBackClick}\r\n          className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors md:hidden\"\r\n        >\r\n          <ArrowLeft className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n        </button>\r\n\r\n        {/* Avatar */}\r\n        <div className=\"relative\">\r\n          <img\r\n            src={getChatAvatar(selectedChat) || \"/placeholder.svg\"}\r\n            alt={getChatName(selectedChat)}\r\n            className=\"w-10 h-10 rounded-full object-cover\"\r\n          />\r\n          {selectedChat.type === \"direct\" && otherUser && (\r\n            <span\r\n              className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-[var(--color-card)] ${\r\n                otherUser.status === \"online\" ? \"bg-[var(--color-online)]\" : \"bg-[var(--color-offline)]\"\r\n              }`}\r\n            />\r\n          )}\r\n          {selectedChat.type === \"group\" && (\r\n            <span className=\"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-[var(--color-primary)] flex items-center justify-center\">\r\n              <Users className=\"w-3 h-3 text-white\" />\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Info */}\r\n        <div>\r\n          <h2 className=\"font-semibold text-[var(--color-foreground)]\">{getChatName(selectedChat)}</h2>\r\n          <p className=\"text-xs text-[var(--color-muted)]\">\r\n            {isTyping ? (\r\n              <span className=\"text-[var(--color-primary)] flex items-center gap-1\">\r\n                {getTypingText()}\r\n                <span className=\"flex gap-0.5\">\r\n                  <span className=\"typing-dot w-1 h-1 rounded-full bg-[var(--color-primary)]\" />\r\n                  <span className=\"typing-dot w-1 h-1 rounded-full bg-[var(--color-primary)]\" />\r\n                  <span className=\"typing-dot w-1 h-1 rounded-full bg-[var(--color-primary)]\" />\r\n                </span>\r\n              </span>\r\n            ) : selectedChat.type === \"direct\" ? (\r\n              otherUser?.status === \"online\" ? (\r\n                \"Online\"\r\n              ) : (\r\n                `Last seen ${otherUser?.lastSeen || \"recently\"}`\r\n              )\r\n            ) : (\r\n              <span className=\"truncate max-w-[200px] inline-block\">{getParticipantNames()}</span>\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex items-center gap-1\">\r\n        <button className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\">\r\n          <Video className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n        </button>\r\n        <button className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\">\r\n          <Phone className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n        </button>\r\n        <button\r\n          onClick={() => setShowDeleteDialog(true)}\r\n          className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors text-red-500 hover:text-red-600\"\r\n          title=\"Delete chat\"\r\n        >\r\n          <Trash2 className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Chat</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this chat with <strong>{getChatName(selectedChat)}</strong>? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <div className=\"flex justify-end gap-3\">\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => {\r\n                deleteChat(selectedChat.id)\r\n                setShowDeleteDialog(false)\r\n              }}\r\n              className=\"bg-red-600 hover:bg-red-700\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </div>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAWO,SAAS,WAAW,EAAE,WAAW,EAAmB;;IACzD,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,mBAAmB,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,IAAA,sMAAO;IAC1G,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,sOAAQ,EAAC;IAEzD,IAAI,CAAC,cAAc,OAAO;IAE1B,MAAM,YAAY,oBAAoB;IACtC,MAAM,kBAAkB,WAAW,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE;IAC1D,MAAM,WAAW,gBAAgB,MAAM,GAAG;IAE1C,wCAAwC;IACxC,MAAM,sBAAsB;QAC1B,IAAI,aAAa,IAAI,KAAK,SAAS,OAAO;QAE1C,OAAO,aAAa,YAAY,CAAC,GAAG,CAAC,CAAC,KAAO,qMAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,QAAQ,WAAW,IAAI,CAAC;IAC5G;IAEA,4BAA4B;IAC5B,MAAM,gBAAgB;QACpB,IAAI,CAAC,UAAU,OAAO;QAEtB,MAAM,cAAc,gBAAgB,GAAG,CAAC,CAAC,KAAO,qMAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,QAAQ,WAAW,IAAI,CAAC;QAE7G,OAAO,GAAG,YAAY,aAAa,CAAC;IACtC;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAI,WAAU;;kCAEb,0PAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,0PAAC,6RAAS;4BAAC,WAAU;;;;;;;;;;;kCAIvB,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCACC,KAAK,cAAc,iBAAiB;gCACpC,KAAK,YAAY;gCACjB,WAAU;;;;;;4BAEX,aAAa,IAAI,KAAK,YAAY,2BACjC,0PAAC;gCACC,WAAW,CAAC,mFAAmF,EAC7F,UAAU,MAAM,KAAK,WAAW,6BAA6B,6BAC7D;;;;;;4BAGL,aAAa,IAAI,KAAK,yBACrB,0PAAC;gCAAK,WAAU;0CACd,cAAA,0PAAC,6QAAK;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAMvB,0PAAC;;0CACC,0PAAC;gCAAG,WAAU;0CAAgD,YAAY;;;;;;0CAC1E,0PAAC;gCAAE,WAAU;0CACV,yBACC,0PAAC;oCAAK,WAAU;;wCACb;sDACD,0PAAC;4CAAK,WAAU;;8DACd,0PAAC;oDAAK,WAAU;;;;;;8DAChB,0PAAC;oDAAK,WAAU;;;;;;8DAChB,0PAAC;oDAAK,WAAU;;;;;;;;;;;;;;;;;2CAGlB,aAAa,IAAI,KAAK,WACxB,WAAW,WAAW,WACpB,WAEA,CAAC,UAAU,EAAE,WAAW,YAAY,YAAY,iBAGlD,0PAAC;oCAAK,WAAU;8CAAuC;;;;;;;;;;;;;;;;;;;;;;;0BAO/D,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAO,WAAU;kCAChB,cAAA,0PAAC,6QAAK;4BAAC,WAAU;;;;;;;;;;;kCAEnB,0PAAC;wBAAO,WAAU;kCAChB,cAAA,0PAAC,6QAAK;4BAAC,WAAU;;;;;;;;;;;kCAEnB,0PAAC;wBACC,SAAS,IAAM,oBAAoB;wBACnC,WAAU;wBACV,OAAM;kCAEN,cAAA,0PAAC,oRAAM;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKtB,0PAAC,mNAAW;gBAAC,MAAM;gBAAkB,cAAc;0BACjD,cAAA,0PAAC,0NAAkB;;sCACjB,0PAAC,yNAAiB;;8CAChB,0PAAC,wNAAgB;8CAAC;;;;;;8CAClB,0PAAC,8NAAsB;;wCAAC;sDACyB,0PAAC;sDAAQ,YAAY;;;;;;wCAAuB;;;;;;;;;;;;;sCAG/F,0PAAC;4BAAI,WAAU;;8CACb,0PAAC,yNAAiB;8CAAC;;;;;;8CACnB,0PAAC,yNAAiB;oCAChB,SAAS;wCACP,WAAW,aAAa,EAAE;wCAC1B,oBAAoB;oCACtB;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;GA9HgB;;QACqF,sMAAO;;;KAD5F"}},
    {"offset": {"line": 4413, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/message-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Message List Component\r\n *\r\n * Displays messages in a chat with proper styling for sent/received messages.\r\n * Features auto-scroll and message status indicators.\r\n */\r\n\r\nimport { useEffect, useRef } from \"react\"\r\nimport { Check, CheckCheck } from \"lucide-react\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useAuth } from \"@/context/auth-context\"\r\nimport { dummyUsers } from \"@/utils/dummy-users\"\r\nimport { format, isToday, isYesterday } from \"date-fns\"\r\n\r\nexport function MessageList() {\r\n  const { selectedChat, messages } = useChat()\r\n  const { user } = useAuth()\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Filter messages for selected chat\r\n  const chatMessages = messages.filter((msg) => msg.chatId === selectedChat?.id)\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }, [chatMessages.length])\r\n\r\n  // Format timestamp\r\n  const formatTime = (date: Date) => {\r\n    return format(new Date(date), \"HH:mm\")\r\n  }\r\n\r\n  // Format date separator\r\n  const formatDateSeparator = (date: Date) => {\r\n    const d = new Date(date)\r\n    if (isToday(d)) return \"Today\"\r\n    if (isYesterday(d)) return \"Yesterday\"\r\n    return format(d, \"MMMM d, yyyy\")\r\n  }\r\n\r\n  // Group messages by date\r\n  const groupedMessages: { date: string; messages: typeof chatMessages }[] = []\r\n  let currentDate = \"\"\r\n\r\n  chatMessages.forEach((msg) => {\r\n    const msgDate = formatDateSeparator(msg.timestamp)\r\n    if (msgDate !== currentDate) {\r\n      currentDate = msgDate\r\n      groupedMessages.push({ date: msgDate, messages: [msg] })\r\n    } else {\r\n      groupedMessages[groupedMessages.length - 1].messages.push(msg)\r\n    }\r\n  })\r\n\r\n  // Get message status icon\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case \"sent\":\r\n        return <Check className=\"w-4 h-4 text-[var(--color-muted)]\" />\r\n      case \"delivered\":\r\n        return <CheckCheck className=\"w-4 h-4 text-[var(--color-muted)]\" />\r\n      case \"read\":\r\n        return <CheckCheck className=\"w-4 h-4 text-blue-500\" />\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  if (!selectedChat) return null\r\n\r\n  return (\r\n    <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 chat-background\">\r\n      {chatMessages.length === 0 ? (\r\n        <div className=\"flex flex-col items-center justify-center h-full text-center\">\r\n          <div className=\"w-20 h-20 rounded-full bg-[var(--color-primary)]/10 flex items-center justify-center mb-4\">\r\n            <svg\r\n              className=\"w-10 h-10 text-[var(--color-primary)]\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"font-semibold text-[var(--color-foreground)] mb-1\">No messages yet</h3>\r\n          <p className=\"text-sm text-[var(--color-muted)]\">Send a message to start the conversation!</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {groupedMessages.map((group, groupIndex) => (\r\n            <div key={groupIndex}>\r\n              {/* Date separator */}\r\n              <div className=\"flex items-center justify-center my-4\">\r\n                <span className=\"px-3 py-1 text-xs font-medium text-[var(--color-muted-foreground)] bg-[var(--color-card)] rounded-lg shadow-sm\">\r\n                  {group.date}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Messages */}\r\n              {group.messages.map((message, msgIndex) => {\r\n                const isSent = message.senderId === user?.id\r\n                const sender = dummyUsers.find((u) => u.id === message.senderId)\r\n                const showSenderName =\r\n                  selectedChat.type === \"group\" &&\r\n                  !isSent &&\r\n                  (msgIndex === 0 || group.messages[msgIndex - 1].senderId !== message.senderId)\r\n\r\n                return (\r\n                  <div key={message.id} className={`flex mb-1 ${isSent ? \"justify-end\" : \"justify-start\"}`}>\r\n                    <div\r\n                      className={`max-w-[70%] ${\r\n                        isSent ? \"bg-[var(--color-message-sent)]\" : \"bg-[var(--color-message-received)]\"\r\n                      } rounded-2xl px-4 py-2 shadow-sm ${isSent ? \"rounded-br-md\" : \"rounded-bl-md\"}`}\r\n                    >\r\n                      {/* Sender name for group chats */}\r\n                      {showSenderName && (\r\n                        <p className=\"text-xs font-semibold text-[var(--color-primary)] mb-1\">\r\n                          {sender?.name || \"Unknown\"}\r\n                        </p>\r\n                      )}\r\n\r\n                      {/* Message content */}\r\n                      <p className=\"text-[var(--color-foreground)] text-sm leading-relaxed break-words\">\r\n                        {message.content}\r\n                      </p>\r\n\r\n                      {/* Timestamp and status */}\r\n                      <div className={`flex items-center gap-1 mt-1 ${isSent ? \"justify-end\" : \"justify-start\"}`}>\r\n                        <span className=\"text-[10px] text-[var(--color-muted)]\">{formatTime(message.timestamp)}</span>\r\n                        {isSent && getStatusIcon(message.status)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4682, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/message-input.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Message Input Component\r\n *\r\n * Input field for composing and sending messages.\r\n * Features typing indicator integration and emoji support placeholder.\r\n */\r\n\r\nimport type React from \"react\"\r\nimport { useState, useRef, useEffect } from \"react\"\r\nimport { Send, Smile, Paperclip, Mic } from \"lucide-react\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { useSocket } from \"@/context/socket-context\"\r\n\r\nexport function MessageInput() {\r\n  const { selectedChat, sendMessage, setTyping } = useChat()\r\n  const { emit } = useSocket()\r\n\r\n  const [message, setMessage] = useState(\"\")\r\n  const [isTyping, setIsTyping] = useState(false)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Focus input when chat changes\r\n  useEffect(() => {\r\n    inputRef.current?.focus()\r\n  }, [selectedChat?.id])\r\n\r\n  // Handle typing indicator\r\n  useEffect(() => {\r\n    if (!selectedChat) return\r\n\r\n    if (message && !isTyping) {\r\n      setIsTyping(true)\r\n      setTyping(selectedChat.id, true)\r\n      emit(\"typing:start\", { chatId: selectedChat.id })\r\n    }\r\n\r\n    // Clear previous timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current)\r\n    }\r\n\r\n    // Set new timeout to stop typing indicator\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      if (isTyping) {\r\n        setIsTyping(false)\r\n        setTyping(selectedChat.id, false)\r\n        emit(\"typing:stop\", { chatId: selectedChat.id })\r\n      }\r\n    }, 2000)\r\n\r\n    return () => {\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [message, selectedChat, isTyping, setTyping, emit])\r\n\r\n  const handleSend = () => {\r\n    if (!message.trim() || !selectedChat) return\r\n\r\n    sendMessage(message)\r\n    setMessage(\"\")\r\n    setIsTyping(false)\r\n    setTyping(selectedChat.id, false)\r\n    emit(\"typing:stop\", { chatId: selectedChat.id })\r\n\r\n    inputRef.current?.focus()\r\n  }\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault()\r\n      handleSend()\r\n    }\r\n  }\r\n\r\n  if (!selectedChat) return null\r\n\r\n  return (\r\n    <div className=\"p-3 bg-[var(--color-card)] border-t border-[var(--color-border)]\">\r\n      <div className=\"flex items-center gap-2\">\r\n        {/* Emoji button */}\r\n        <button className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\">\r\n          <Smile className=\"w-6 h-6 text-[var(--color-muted-foreground)]\" />\r\n        </button>\r\n\r\n        {/* Attachment button */}\r\n        <button className=\"p-2 rounded-full hover:bg-[var(--color-secondary)] transition-colors\">\r\n          <Paperclip className=\"w-6 h-6 text-[var(--color-muted-foreground)]\" />\r\n        </button>\r\n\r\n        {/* Input field */}\r\n        <div className=\"flex-1\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Type a message...\"\r\n            className=\"w-full px-4 py-3 bg-[var(--color-input)] rounded-full text-[var(--color-foreground)] placeholder:text-[var(--color-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]\"\r\n          />\r\n        </div>\r\n\r\n        {/* Send/Voice button */}\r\n        {message.trim() ? (\r\n          <button\r\n            onClick={handleSend}\r\n            className=\"p-3 rounded-full bg-[var(--color-primary)] hover:bg-[var(--color-primary-hover)] transition-colors\"\r\n          >\r\n            <Send className=\"w-5 h-5 text-white\" />\r\n          </button>\r\n        ) : (\r\n          <button className=\"p-3 rounded-full hover:bg-[var(--color-secondary)] transition-colors\">\r\n            <Mic className=\"w-5 h-5 text-[var(--color-muted-foreground)]\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAUA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;AAbA;;;;;AAeO,SAAS;;IACd,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,IAAA,sMAAO;IACxD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0MAAS;IAE1B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sOAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAC;IACzC,MAAM,WAAW,IAAA,oOAAM,EAAmB;IAC1C,MAAM,mBAAmB,IAAA,oOAAM,EAAwB;IAEvD,gCAAgC;IAChC,IAAA,uOAAS;kCAAC;YACR,SAAS,OAAO,EAAE;QACpB;iCAAG;QAAC,cAAc;KAAG;IAErB,0BAA0B;IAC1B,IAAA,uOAAS;kCAAC;YACR,IAAI,CAAC,cAAc;YAEnB,IAAI,WAAW,CAAC,UAAU;gBACxB,YAAY;gBACZ,UAAU,aAAa,EAAE,EAAE;gBAC3B,KAAK,gBAAgB;oBAAE,QAAQ,aAAa,EAAE;gBAAC;YACjD;YAEA,yBAAyB;YACzB,IAAI,iBAAiB,OAAO,EAAE;gBAC5B,aAAa,iBAAiB,OAAO;YACvC;YAEA,2CAA2C;YAC3C,iBAAiB,OAAO,GAAG;0CAAW;oBACpC,IAAI,UAAU;wBACZ,YAAY;wBACZ,UAAU,aAAa,EAAE,EAAE;wBAC3B,KAAK,eAAe;4BAAE,QAAQ,aAAa,EAAE;wBAAC;oBAChD;gBACF;yCAAG;YAEH;0CAAO;oBACL,IAAI,iBAAiB,OAAO,EAAE;wBAC5B,aAAa,iBAAiB,OAAO;oBACvC;gBACF;;QACF;iCAAG;QAAC;QAAS;QAAc;QAAU;QAAW;KAAK;IAErD,MAAM,aAAa;QACjB,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,cAAc;QAEtC,YAAY;QACZ,WAAW;QACX,YAAY;QACZ,UAAU,aAAa,EAAE,EAAE;QAC3B,KAAK,eAAe;YAAE,QAAQ,aAAa,EAAE;QAAC;QAE9C,SAAS,OAAO,EAAE;IACpB;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,IAAI,CAAC,cAAc,OAAO;IAE1B,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BAEb,0PAAC;oBAAO,WAAU;8BAChB,cAAA,0PAAC,6QAAK;wBAAC,WAAU;;;;;;;;;;;8BAInB,0PAAC;oBAAO,WAAU;8BAChB,cAAA,0PAAC,yRAAS;wBAAC,WAAU;;;;;;;;;;;8BAIvB,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC;wBACC,KAAK;wBACL,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC1C,YAAY;wBACZ,aAAY;wBACZ,WAAU;;;;;;;;;;;gBAKb,QAAQ,IAAI,mBACX,0PAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,0PAAC,0QAAI;wBAAC,WAAU;;;;;;;;;;yCAGlB,0PAAC;oBAAO,WAAU;8BAChB,cAAA,0PAAC,uQAAG;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAM3B;GA5GgB;;QACmC,sMAAO;QACvC,0MAAS;;;KAFZ"}},
    {"offset": {"line": 4886, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/chat-window.tsx"],"sourcesContent":["\"use client\"\r\nimport { MessageSquare } from \"lucide-react\"\r\nimport { useChat } from \"@/context/chat-context\"\r\nimport { ChatHeader } from \"./chat-header\"\r\nimport { MessageList } from \"./message-list\"\r\nimport { MessageInput } from \"./message-input\"\r\n\r\ninterface ChatWindowProps {\r\n  onBackClick?: () => void\r\n}\r\n\r\nexport function ChatWindow({ onBackClick }: ChatWindowProps) {\r\n  const { selectedChat } = useChat()\r\n\r\n  if (!selectedChat) {\r\n    return (\r\n      <div className=\"flex-1 flex flex-col items-center justify-center bg-[var(--color-background)] text-center p-8\">\r\n        <div className=\"w-24 h-24 rounded-full bg-[var(--color-primary)]/10 flex items-center justify-center mb-6\">\r\n          <MessageSquare className=\"w-12 h-12 text-[var(--color-primary)]\" />\r\n        </div>\r\n        <h2 className=\"text-2xl font-semibold text-[var(--color-foreground)] mb-2\">Welcome to QuickChat</h2>\r\n        <p className=\"text-[var(--color-muted)] max-w-md\">\r\n          Select a conversation from the sidebar or start a new chat to begin messaging. Your messages are fast, simple,\r\n          and secure.\r\n        </p>\r\n        <div className=\"mt-8 flex items-center gap-4 text-sm text-[var(--color-muted)]\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"w-2 h-2 rounded-full bg-[var(--color-online)]\" />\r\n            <span>End-to-end encrypted</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"w-2 h-2 rounded-full bg-[var(--color-primary)]\" />\r\n            <span>Real-time messaging</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col h-full\">\r\n      <ChatHeader onBackClick={onBackClick} />\r\n      <MessageList />\r\n      <MessageInput />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAWO,SAAS,WAAW,EAAE,WAAW,EAAmB;;IACzD,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,sMAAO;IAEhC,IAAI,CAAC,cAAc;QACjB,qBACE,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC,ySAAa;wBAAC,WAAU;;;;;;;;;;;8BAE3B,0PAAC;oBAAG,WAAU;8BAA6D;;;;;;8BAC3E,0PAAC;oBAAE,WAAU;8BAAqC;;;;;;8BAIlD,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCAAK,WAAU;;;;;;8CAChB,0PAAC;8CAAK;;;;;;;;;;;;sCAER,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCAAK,WAAU;;;;;;8CAChB,0PAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;IAKhB;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC,2MAAU;gBAAC,aAAa;;;;;;0BACzB,0PAAC,6MAAW;;;;;0BACZ,0PAAC,+MAAY;;;;;;;;;;;AAGnB;GAnCgB;;QACW,sMAAO;;;KADlB"}},
    {"offset": {"line": 5045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/components/home-page.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * QuickChat - Home Page Component\r\n *\r\n * Main application layout with responsive sidebar and chat window.\r\n */\r\n\r\nimport { useState } from \"react\"\r\nimport { Sidebar } from \"./sidebar\"\r\nimport { ChatWindow } from \"./chat-window\"\r\nimport { useChat } from \"@/context/chat-context\"\r\n\r\nexport function HomePage() {\r\n  const { selectedChat } = useChat()\r\n  const [showSidebar, setShowSidebar] = useState(true)\r\n\r\n  return (\r\n    <div className=\"h-screen flex overflow-hidden bg-[var(--color-background)]\">\r\n      {/* Sidebar - hidden on mobile when chat is selected */}\r\n      <div\r\n        className={`${\r\n          selectedChat && !showSidebar ? \"hidden\" : \"flex\"\r\n        } md:flex w-full md:w-[400px] lg:w-[420px] flex-shrink-0`}\r\n      >\r\n        <div className=\"w-full h-full\">\r\n          <Sidebar onMobileClose={() => setShowSidebar(false)} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Window */}\r\n      <div className={`${!selectedChat || showSidebar ? \"hidden\" : \"flex\"} md:flex flex-1 flex-col`}>\r\n        <ChatWindow onBackClick={() => setShowSidebar(true)} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;CAIC,GAED;AACA;AACA;AACA;;;AAXA;;;;;AAaO,SAAS;;IACd,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,sMAAO;IAChC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sOAAQ,EAAC;IAE/C,qBACE,0PAAC;QAAI,WAAU;;0BAEb,0PAAC;gBACC,WAAW,GACT,gBAAgB,CAAC,cAAc,WAAW,OAC3C,uDAAuD,CAAC;0BAEzD,cAAA,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC,iMAAO;wBAAC,eAAe,IAAM,eAAe;;;;;;;;;;;;;;;;0BAKjD,0PAAC;gBAAI,WAAW,GAAG,CAAC,gBAAgB,cAAc,WAAW,OAAO,wBAAwB,CAAC;0BAC3F,cAAA,0PAAC,2MAAU;oBAAC,aAAa,IAAM,eAAe;;;;;;;;;;;;;;;;;AAItD;GAvBgB;;QACW,sMAAO;;;KADlB"}},
    {"offset": {"line": 5129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Abhinay%20Chowdary/OneDrive/fsd_project/quick-chat-react-project%20%281%29/app/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\n\r\n\r\nimport { useState } from \"react\"\r\nimport { AuthProvider, useAuth } from \"@/context/auth-context\"\r\nimport { ChatProvider } from \"@/context/chat-context\"\r\nimport { SocketProvider } from \"@/context/socket-context\"\r\nimport { FriendProvider } from \"@/context/friend-context\"\r\nimport { LoginPage } from \"@/components/login-page\"\r\nimport { RegisterPage } from \"@/components/register-page\"\r\nimport { HomePage } from \"@/components/home-page\"\r\n\r\nfunction AppContent() {\r\n  const { isAuthenticated, isLoading } = useAuth()\r\n  const [authMode, setAuthMode] = useState<\"login\" | \"register\">(\"login\")\r\n\r\n  // Show loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[var(--color-background)]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 rounded-full border-4 border-[var(--color-primary)] border-t-transparent animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-[var(--color-muted)]\">Loading QuickChat...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Show auth pages if not authenticated\r\n  if (!isAuthenticated) {\r\n    return authMode === \"login\" ? (\r\n      <LoginPage onSwitchToRegister={() => setAuthMode(\"register\")} />\r\n    ) : (\r\n      <RegisterPage onSwitchToLogin={() => setAuthMode(\"login\")} />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <SocketProvider>\r\n      <ChatProvider>\r\n        <FriendProvider>\r\n          <HomePage />\r\n        </FriendProvider>\r\n      </ChatProvider>\r\n    </SocketProvider>\r\n  )\r\n}\r\n\r\nexport default function QuickChatApp() {\r\n  return (\r\n    <AuthProvider>\r\n      <AppContent />\r\n    </AuthProvider>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAXA;;;;;;;;;AAaA,SAAS;;IACP,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,IAAA,sMAAO;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAuB;IAE/D,qBAAqB;IACrB,IAAI,WAAW;QACb,qBACE,0PAAC;YAAI,WAAU;sBACb,cAAA,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAI,WAAU;;;;;;kCACf,0PAAC;wBAAE,WAAU;kCAA4B;;;;;;;;;;;;;;;;;IAIjD;IAEA,uCAAuC;IACvC,IAAI,CAAC,iBAAiB;QACpB,OAAO,aAAa,wBAClB,0PAAC,yMAAS;YAAC,oBAAoB,IAAM,YAAY;;;;;iCAEjD,0PAAC,+MAAY;YAAC,iBAAiB,IAAM,YAAY;;;;;;IAErD;IAEA,qBACE,0PAAC,+MAAc;kBACb,cAAA,0PAAC,2MAAY;sBACX,cAAA,0PAAC,+MAAc;0BACb,cAAA,0PAAC,uMAAQ;;;;;;;;;;;;;;;;;;;;AAKnB;GAlCS;;QACgC,sMAAO;;;KADvC;AAoCM,SAAS;IACtB,qBACE,0PAAC,2MAAY;kBACX,cAAA,0PAAC;;;;;;;;;;AAGP;MANwB"}}]
}